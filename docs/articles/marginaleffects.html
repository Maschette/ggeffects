<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tidy Data Frames of Marginal Effects • ggeffects</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tidy Data Frames of Marginal Effects">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggeffects</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.6.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/effectsatvalues.html">Marginal Effects at Specific Values</a>
    </li>
    <li>
      <a href="../articles/marginaleffects.html">Tidy Data Frames of Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/plotmethod.html">Plotting Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/stata.html">Different Output between Stata and ggeffects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Tidy Data Frames of Marginal Effects</h1>
                        <h4 class="author">Daniel Lüdecke</h4>
            
            <h4 class="date">2018-11-05</h4>
      
      
      <div class="hidden name"><code>marginaleffects.Rmd</code></div>

    </div>

    
    
<div id="aim-of-the-ggeffects-package" class="section level1">
<h1 class="hasAnchor">
<a href="#aim-of-the-ggeffects-package" class="anchor"></a>Aim of the ggeffects-package</h1>
<p>The aim of this package is similar to the <a href="https://cran.r-project.org/package=broom">broom-package</a>: transforming “untidy” input into a tidy data frame, especially for further use with <a href="https://cran.r-project.org/package=ggplot2">ggplot</a>. However, <strong>ggeffects</strong> does not return model-summaries; rather, this package computes marginal effects at the mean or average marginal effects from statistical models and returns the result as tidy data frame.</p>
<p>Since the focus lies on plotting the data (the marginal effects), at least one model term needs to be specified for which the effects are computed. It is also possible to compute marginal effects for model terms, grouped by the levels of another model’s predictor. The package also allows plotting marginal effects for two- or three-way-interactions, or for specific values of a model term only. Examples are shown below.</p>
</div>
<div id="consistent-and-tidy-structure" class="section level1">
<h1 class="hasAnchor">
<a href="#consistent-and-tidy-structure" class="anchor"></a>Consistent and tidy structure</h1>
<p>The returned data frames always have the same, consistent structure and column names, so it’s easy to create ggplot-plots without the need to re-write the arguments to be mapped in each ggplot-call. <code>x</code> and <code>predicted</code> are the values for the x- and y-axis. <code>conf.low</code> and <code>conf.high</code> could be used as <code>ymin</code> and <code>ymax</code> aesthetics for ribbons to add confidence bands to the plot. <code>group</code> can be used as grouping-aesthetics, or for faceting.</p>
</div>
<div id="marginal-effects-at-the-mean" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-at-the-mean" class="anchor"></a>Marginal effects at the mean</h1>
<p><code><a href="../reference/ggpredict.html">ggpredict()</a></code> computes predicted values for all possible levels and values from a model’s predictors. In the simplest case, a fitted model is passed as first argument, and the term in question as second argument:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(ggeffects)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">data</span>(efc)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(barthtot <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span>neg_c_<span class="dv">7</span> <span class="op">+</span><span class="st"> </span>c161sex <span class="op">+</span><span class="st"> </span>c172code, <span class="dt">data =</span> efc)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="st">"c12hour"</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; # x = average number of hours of care per week </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt;   0    75.444   73.257    77.630</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;   5    74.177   72.098    76.256</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt;  10    72.911   70.931    74.890</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt;  15    71.644   69.753    73.535</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;  20    70.378   68.564    72.191</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;  25    69.111   67.361    70.861</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;  30    67.845   66.144    69.545</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;  35    66.578   64.911    68.245</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt;  40    65.312   63.661    66.962</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt;  45    64.045   62.393    65.697</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt; *  neg_c_7 = 11.84</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt; *  c161sex = 1.76</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; * c172code = 1.97</span></a></code></pre></div>
<p>The output shows the predicted values for the response at each value from the term <em>c12hour</em>. The data is already in shape for ggplot:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">theme_set</span>(<span class="kw">theme_bw</span>())</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="st">"c12hour"</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-2-1.png" width="672"></p>
</div>
<div id="marginal-effects-at-the-mean-for-different-groups" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-at-the-mean-for-different-groups" class="anchor"></a>Marginal effects at the mean for different groups</h1>
<p>The <code>terms</code>-argument accepts up to three model terms, where the second and third term indicate grouping levels. This allows predictions for the term in question at different levels for other model terms:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>, <span class="st">"c172code"</span>))</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; # x = average number of hours of care per week </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; # low level of education</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;   0    74.746   71.266    78.227</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;   5    73.480   70.080    76.880</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  10    72.213   68.887    75.540</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  15    70.947   67.686    74.207</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  20    69.680   66.478    72.883</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  25    68.414   65.262    71.566</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  30    67.147   64.037    70.257</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  35    65.881   62.804    68.958</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  40    64.614   61.561    67.668</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  45    63.348   60.309    66.387</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; # intermediate level of education</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt;   0    75.465   73.282    77.647</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt;   5    74.198   72.123    76.273</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt;  10    72.932   70.955    74.909</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt;  15    71.665   69.777    73.554</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt;  20    70.399   68.587    72.211</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt;  25    69.132   67.383    70.881</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt;  30    67.866   66.165    69.566</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt;  35    66.599   64.931    68.267</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt;  40    65.333   63.680    66.985</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt;  45    64.066   62.412    65.720</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; # high level of education</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co">#&gt;   0    76.183   72.816    79.550</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="co">#&gt;   5    74.917   71.604    78.229</span></a>
<a class="sourceLine" id="cb3-38" data-line-number="38"><span class="co">#&gt;  10    73.650   70.384    76.916</span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co">#&gt;  15    72.384   69.155    75.612</span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="co">#&gt;  20    71.117   67.918    74.316</span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"><span class="co">#&gt;  25    69.851   66.672    73.029</span></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co">#&gt;  30    68.584   65.417    71.751</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="co">#&gt;  35    67.318   64.153    70.482</span></a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co">#&gt;  40    66.051   62.880    69.223</span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co">#&gt;  45    64.785   61.597    67.972</span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb3-49" data-line-number="49"><span class="co">#&gt; * neg_c_7 = 11.84</span></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="co">#&gt; * c161sex = 1.76</span></a></code></pre></div>
<p>Creating a ggplot is pretty straightforward: the colour-aesthetics is mapped with the <code>group</code>-column:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>, <span class="st">"c172code"</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>Finally, a second grouping structure can be defined, which will create another column named <code>facet</code>, which - as the name implies - might be used to create a facted plot:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>, <span class="st">"c172code"</span>, <span class="st">"c161sex"</span>))</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">mydf</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; # x = average number of hours of care per week </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; # low level of education</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; # [1] Male</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   0    73.954   69.354    78.554</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   5    72.688   68.143    77.233</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;  10    71.421   66.925    75.917</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;  15    70.155   65.702    74.607</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;  20    68.888   64.472    73.304</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt;  25    67.622   63.237    72.007</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt;  30    66.355   61.995    70.716</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt;  35    65.089   60.746    69.431</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt;  40    63.822   59.490    68.154</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt;  45    62.556   58.228    66.883</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; # low level of education</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; # [2] Female</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt;   0    74.996   71.406    78.585</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt;   5    73.729   70.219    77.239</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt;  10    72.463   69.026    75.899</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">#&gt;  15    71.196   67.826    74.566</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt;  20    69.930   66.618    73.241</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt;  25    68.663   65.403    71.924</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt;  30    67.397   64.179    70.614</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">#&gt;  35    66.130   62.947    69.313</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt;  40    64.864   61.706    68.021</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="co">#&gt;  45    63.597   60.456    66.738</span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="co">#&gt; # intermediate level of education</span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co">#&gt; # [1] Male</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">#&gt;   0    74.673   71.055    78.290</span></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="co">#&gt;   5    73.406   69.846    76.966</span></a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="co">#&gt;  10    72.139   68.629    75.650</span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="co">#&gt;  15    70.873   67.404    74.342</span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="co">#&gt;  20    69.606   66.171    73.042</span></a>
<a class="sourceLine" id="cb5-45" data-line-number="45"><span class="co">#&gt;  25    68.340   64.931    71.749</span></a>
<a class="sourceLine" id="cb5-46" data-line-number="46"><span class="co">#&gt;  30    67.073   63.681    70.465</span></a>
<a class="sourceLine" id="cb5-47" data-line-number="47"><span class="co">#&gt;  35    65.807   62.424    69.190</span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="co">#&gt;  40    64.540   61.158    67.923</span></a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">#&gt;  45    63.274   59.883    66.665</span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-52" data-line-number="52"><span class="co">#&gt; # intermediate level of education</span></a>
<a class="sourceLine" id="cb5-53" data-line-number="53"><span class="co">#&gt; # [2] Female</span></a>
<a class="sourceLine" id="cb5-54" data-line-number="54"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb5-55" data-line-number="55"><span class="co">#&gt;   0    75.714   73.313    78.115</span></a>
<a class="sourceLine" id="cb5-56" data-line-number="56"><span class="co">#&gt;   5    74.447   72.146    76.748</span></a>
<a class="sourceLine" id="cb5-57" data-line-number="57"><span class="co">#&gt;  10    73.181   70.972    75.390</span></a>
<a class="sourceLine" id="cb5-58" data-line-number="58"><span class="co">#&gt;  15    71.914   69.787    74.041</span></a>
<a class="sourceLine" id="cb5-59" data-line-number="59"><span class="co">#&gt;  20    70.648   68.592    72.703</span></a>
<a class="sourceLine" id="cb5-60" data-line-number="60"><span class="co">#&gt;  25    69.381   67.385    71.378</span></a>
<a class="sourceLine" id="cb5-61" data-line-number="61"><span class="co">#&gt;  30    68.115   66.165    70.065</span></a>
<a class="sourceLine" id="cb5-62" data-line-number="62"><span class="co">#&gt;  35    66.848   64.931    68.766</span></a>
<a class="sourceLine" id="cb5-63" data-line-number="63"><span class="co">#&gt;  40    65.582   63.682    67.482</span></a>
<a class="sourceLine" id="cb5-64" data-line-number="64"><span class="co">#&gt;  45    64.315   62.418    66.213</span></a>
<a class="sourceLine" id="cb5-65" data-line-number="65"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb5-66" data-line-number="66"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-67" data-line-number="67"><span class="co">#&gt; # high level of education</span></a>
<a class="sourceLine" id="cb5-68" data-line-number="68"><span class="co">#&gt; # [1] Male</span></a>
<a class="sourceLine" id="cb5-69" data-line-number="69"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb5-70" data-line-number="70"><span class="co">#&gt;   0    75.391   71.040    79.741</span></a>
<a class="sourceLine" id="cb5-71" data-line-number="71"><span class="co">#&gt;   5    74.124   69.810    78.439</span></a>
<a class="sourceLine" id="cb5-72" data-line-number="72"><span class="co">#&gt;  10    72.858   68.573    77.143</span></a>
<a class="sourceLine" id="cb5-73" data-line-number="73"><span class="co">#&gt;  15    71.591   67.330    75.853</span></a>
<a class="sourceLine" id="cb5-74" data-line-number="74"><span class="co">#&gt;  20    70.325   66.080    74.570</span></a>
<a class="sourceLine" id="cb5-75" data-line-number="75"><span class="co">#&gt;  25    69.058   64.823    73.294</span></a>
<a class="sourceLine" id="cb5-76" data-line-number="76"><span class="co">#&gt;  30    67.792   63.559    72.025</span></a>
<a class="sourceLine" id="cb5-77" data-line-number="77"><span class="co">#&gt;  35    66.525   62.288    70.762</span></a>
<a class="sourceLine" id="cb5-78" data-line-number="78"><span class="co">#&gt;  40    65.259   61.011    69.507</span></a>
<a class="sourceLine" id="cb5-79" data-line-number="79"><span class="co">#&gt;  45    63.992   59.727    68.258</span></a>
<a class="sourceLine" id="cb5-80" data-line-number="80"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb5-81" data-line-number="81"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-82" data-line-number="82"><span class="co">#&gt; # high level of education</span></a>
<a class="sourceLine" id="cb5-83" data-line-number="83"><span class="co">#&gt; # [2] Female</span></a>
<a class="sourceLine" id="cb5-84" data-line-number="84"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb5-85" data-line-number="85"><span class="co">#&gt;   0    76.432   72.887    79.977</span></a>
<a class="sourceLine" id="cb5-86" data-line-number="86"><span class="co">#&gt;   5    75.166   71.674    78.657</span></a>
<a class="sourceLine" id="cb5-87" data-line-number="87"><span class="co">#&gt;  10    73.899   70.454    77.345</span></a>
<a class="sourceLine" id="cb5-88" data-line-number="88"><span class="co">#&gt;  15    72.633   69.226    76.040</span></a>
<a class="sourceLine" id="cb5-89" data-line-number="89"><span class="co">#&gt;  20    71.366   67.989    74.743</span></a>
<a class="sourceLine" id="cb5-90" data-line-number="90"><span class="co">#&gt;  25    70.100   66.744    73.455</span></a>
<a class="sourceLine" id="cb5-91" data-line-number="91"><span class="co">#&gt;  30    68.833   65.491    72.175</span></a>
<a class="sourceLine" id="cb5-92" data-line-number="92"><span class="co">#&gt;  35    67.567   64.229    70.904</span></a>
<a class="sourceLine" id="cb5-93" data-line-number="93"><span class="co">#&gt;  40    66.300   62.958    69.642</span></a>
<a class="sourceLine" id="cb5-94" data-line-number="94"><span class="co">#&gt;  45    65.034   61.679    68.388</span></a>
<a class="sourceLine" id="cb5-95" data-line-number="95"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb5-96" data-line-number="96"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-97" data-line-number="97"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb5-98" data-line-number="98"><span class="co">#&gt; * neg_c_7 = 11.84</span></a>
<a class="sourceLine" id="cb5-99" data-line-number="99"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-100" data-line-number="100"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-101" data-line-number="101"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>facet)</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
</div>
<div id="marginal-effects-for-each-model-term" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-for-each-model-term" class="anchor"></a>Marginal effects for each model term</h1>
<p>If the <code>term</code> argument is either missing or <code>NULL</code>, marginal effects for each model term are calculated. The result is returned as a list, which can be plotted manually (or using the <code><a href="../reference/plot.html">plot()</a></code> function).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">mydf</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; $c12hour</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; # x = average number of hours of care per week </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;   0    75.444   73.257    77.630</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;   5    74.177   72.098    76.256</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  10    72.911   70.931    74.890</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  15    71.644   69.753    73.535</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  20    70.378   68.564    72.191</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  25    69.111   67.361    70.861</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;  30    67.845   66.144    69.545</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt;  35    66.578   64.911    68.245</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt;  40    65.312   63.661    66.962</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt;  45    64.045   62.393    65.697</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt;  ... and 25 more rows.</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt; *  neg_c_7 = 11.84</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt; *  c161sex = 1.76</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; * c172code = 1.97</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt; $neg_c_7</span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="co">#&gt; # x = Negative impact with 7 items </span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33"><span class="co">#&gt;   6    78.166   75.107    81.225</span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="co">#&gt;   8    73.571   71.207    75.935</span></a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="co">#&gt;  10    68.977   67.139    70.815</span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="co">#&gt;  12    64.383   62.732    66.033</span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="co">#&gt;  14    59.788   57.883    61.693</span></a>
<a class="sourceLine" id="cb6-38" data-line-number="38"><span class="co">#&gt;  16    55.194   52.725    57.662</span></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="co">#&gt;  18    50.599   47.419    53.779</span></a>
<a class="sourceLine" id="cb6-40" data-line-number="40"><span class="co">#&gt;  20    46.005   42.043    49.966</span></a>
<a class="sourceLine" id="cb6-41" data-line-number="41"><span class="co">#&gt;  22    41.410   36.632    46.188</span></a>
<a class="sourceLine" id="cb6-42" data-line-number="42"><span class="co">#&gt;  24    36.816   31.201    42.430</span></a>
<a class="sourceLine" id="cb6-43" data-line-number="43"><span class="co">#&gt;  ... and 2 more rows.</span></a>
<a class="sourceLine" id="cb6-44" data-line-number="44"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-45" data-line-number="45"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb6-46" data-line-number="46"><span class="co">#&gt; *  c12hour = 42.20</span></a>
<a class="sourceLine" id="cb6-47" data-line-number="47"><span class="co">#&gt; *  c161sex = 1.76</span></a>
<a class="sourceLine" id="cb6-48" data-line-number="48"><span class="co">#&gt; * c172code = 1.97</span></a>
<a class="sourceLine" id="cb6-49" data-line-number="49"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-50" data-line-number="50"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-51" data-line-number="51"><span class="co">#&gt; $c161sex</span></a>
<a class="sourceLine" id="cb6-52" data-line-number="52"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-53" data-line-number="53"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb6-54" data-line-number="54"><span class="co">#&gt; # x = carer's gender </span></a>
<a class="sourceLine" id="cb6-55" data-line-number="55"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-56" data-line-number="56"><span class="co">#&gt;  x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb6-57" data-line-number="57"><span class="co">#&gt;  1    63.962   60.575    67.350</span></a>
<a class="sourceLine" id="cb6-58" data-line-number="58"><span class="co">#&gt;  2    65.004   63.110    66.897</span></a>
<a class="sourceLine" id="cb6-59" data-line-number="59"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-60" data-line-number="60"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb6-61" data-line-number="61"><span class="co">#&gt; *  c12hour = 42.20</span></a>
<a class="sourceLine" id="cb6-62" data-line-number="62"><span class="co">#&gt; *  neg_c_7 = 11.84</span></a>
<a class="sourceLine" id="cb6-63" data-line-number="63"><span class="co">#&gt; * c172code = 1.97</span></a>
<a class="sourceLine" id="cb6-64" data-line-number="64"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-65" data-line-number="65"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-66" data-line-number="66"><span class="co">#&gt; $c172code</span></a>
<a class="sourceLine" id="cb6-67" data-line-number="67"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-68" data-line-number="68"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb6-69" data-line-number="69"><span class="co">#&gt; # x = carer's level of education </span></a>
<a class="sourceLine" id="cb6-70" data-line-number="70"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-71" data-line-number="71"><span class="co">#&gt;  x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb6-72" data-line-number="72"><span class="co">#&gt;  1    64.057   61.012    67.103</span></a>
<a class="sourceLine" id="cb6-73" data-line-number="73"><span class="co">#&gt;  2    64.776   63.125    66.427</span></a>
<a class="sourceLine" id="cb6-74" data-line-number="74"><span class="co">#&gt;  3    65.494   62.317    68.672</span></a>
<a class="sourceLine" id="cb6-75" data-line-number="75"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-76" data-line-number="76"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb6-77" data-line-number="77"><span class="co">#&gt; * c12hour = 42.20</span></a>
<a class="sourceLine" id="cb6-78" data-line-number="78"><span class="co">#&gt; * neg_c_7 = 11.84</span></a>
<a class="sourceLine" id="cb6-79" data-line-number="79"><span class="co">#&gt; * c161sex = 1.76</span></a>
<a class="sourceLine" id="cb6-80" data-line-number="80"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-81" data-line-number="81"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-82" data-line-number="82"><span class="co">#&gt; attr(,"class")</span></a>
<a class="sourceLine" id="cb6-83" data-line-number="83"><span class="co">#&gt; [1] "ggalleffects" "list"</span></a></code></pre></div>
</div>
<div id="average-marginal-effects" class="section level1">
<h1 class="hasAnchor">
<a href="#average-marginal-effects" class="anchor"></a>Average marginal effects</h1>
<p><code><a href="../reference/ggpredict.html">ggaverage()</a></code> compute average marginal effects. While <code><a href="../reference/ggpredict.html">ggpredict()</a></code> creates a data-grid (using <code>expand.grid()</code>) for all possible combinations of values (even if some combinations are not present in the data), <code><a href="../reference/ggpredict.html">ggaverage()</a></code> computes predicted values based on the given data. This means that <em>different</em> predicted values for the outcome may occure at the <em>same</em> value or level for the term in question. The predicted values are then averaged for each value of the term in question and the linear trend is smoothed accross the averaged predicted values. This means that the line representing the marginal effects may cross or diverge, and are not necessarily in paralell to each other.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggaverage</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>, <span class="st">"c172code"</span>))</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
</div>
<div id="two--and-three-way-interactions" class="section level1">
<h1 class="hasAnchor">
<a href="#two--and-three-way-interactions" class="anchor"></a>Two- and Three-Way-Interactions</h1>
<p>To plot the marginal effects of interaction terms, simply specify these terms in the <code>terms</code>-argument.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">library</span>(sjmisc)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">data</span>(efc)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co"># make categorical</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">efc<span class="op">$</span>c161sex &lt;-<span class="st"> </span><span class="kw">to_factor</span>(efc<span class="op">$</span>c161sex)</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co"># fit model with interaction</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(neg_c_<span class="dv">7</span> <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span>barthtot <span class="op">*</span><span class="st"> </span>c161sex, <span class="dt">data =</span> efc)</a>
<a class="sourceLine" id="cb8-9" data-line-number="9"></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co"># select only levels 30, 50 and 70 from continuous variable Barthel-Index</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"barthtot [30,50,70]"</span>, <span class="st">"c161sex"</span>))</a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<p>Since the <code>terms</code>-argument accepts up to three model terms, you can also compute marginal effects for a 3-way-interaction.</p>
<p>To plot the marginal effects of interaction terms, simply specify these terms in the <code>terms</code>-argument.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># fit model with 3-way-interaction</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(neg_c_<span class="dv">7</span> <span class="op">~</span><span class="st"> </span>c12hour <span class="op">*</span><span class="st"> </span>barthtot <span class="op">*</span><span class="st"> </span>c161sex, <span class="dt">data =</span> efc)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># select only levels 30, 50 and 70 from continuous variable Barthel-Index</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>, <span class="st">"barthtot [30,50,70]"</span>, <span class="st">"c161sex"</span>))</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>facet)</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</div>
<div id="polynomial-terms-and-splines" class="section level1">
<h1 class="hasAnchor">
<a href="#polynomial-terms-and-splines" class="anchor"></a>Polynomial terms and splines</h1>
<p><code><a href="../reference/ggpredict.html">ggpredict()</a></code> also works for models with polynomial terms or splines. Following code reproduces the plot from <code><a href="http://www.rdocumentation.org/packages/splines/topics/bs">?splines::bs</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">library</span>(splines)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">data</span>(women)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">fm1 &lt;-<span class="st"> </span><span class="kw">lm</span>(weight <span class="op">~</span><span class="st"> </span><span class="kw">bs</span>(height, <span class="dt">df =</span> <span class="dv">5</span>), <span class="dt">data =</span> women)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fm1, <span class="st">"height"</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(x, predicted)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
</div>
<div id="survival-models" class="section level1">
<h1 class="hasAnchor">
<a href="#survival-models" class="anchor"></a>Survival models</h1>
<p><code><a href="../reference/ggpredict.html">ggpredict()</a></code> also supports <code>coxph</code>-models from the <strong>survival</strong>-package and is able to either plot risk-scores (the default), probabilities of survival (<code>type = "surv"</code>) or cumulative hazards (<code>type = "cumhaz"</code>).</p>
<p>Since probabilities of survival and cumulative hazards are changing accross time, the time-variable is automatically used as x-axis in such cases, so the <code>terms</code>-argument only needs up to <strong>two</strong> variables for <code>type = "surv"</code> or <code>type = "cumhaz"</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">data</span>(<span class="st">"lung"</span>, <span class="dt">package =</span> <span class="st">"survival"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co"># remove category 3 (outlier)</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">lung &lt;-<span class="st"> </span><span class="kw">subset</span>(lung, <span class="dt">subset =</span> ph.ecog <span class="op">%in%</span><span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">lung<span class="op">$</span>sex &lt;-<span class="st"> </span><span class="kw">factor</span>(lung<span class="op">$</span>sex, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"male"</span>, <span class="st">"female"</span>))</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">lung<span class="op">$</span>ph.ecog &lt;-<span class="st"> </span><span class="kw">factor</span>(lung<span class="op">$</span>ph.ecog, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"good"</span>, <span class="st">"ok"</span>, <span class="st">"limited"</span>))</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"></a>
<a class="sourceLine" id="cb11-7" data-line-number="7">m &lt;-<span class="st"> </span>survival<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/survival/topics/coxph">coxph</a></span>(survival<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/survival/topics/Surv">Surv</a></span>(time, status) <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>ph.ecog, <span class="dt">data =</span> lung)</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co"># predicted risk-scores</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="kw">c</span>(<span class="st">"sex"</span>, <span class="st">"ph.ecog"</span>))</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; # Predicted risk scores </span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt; # x = sex </span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt; # good</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt;  x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt;  1     0.829    0.621     1.107</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt;  2     0.481    0.340     0.679</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-20" data-line-number="20"><span class="co">#&gt; # ok</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21"><span class="co">#&gt;  x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb11-22" data-line-number="22"><span class="co">#&gt;  1     1.249    1.013     1.540</span></a>
<a class="sourceLine" id="cb11-23" data-line-number="23"><span class="co">#&gt;  2     0.724    0.566     0.925</span></a>
<a class="sourceLine" id="cb11-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-25" data-line-number="25"><span class="co">#&gt; # limited</span></a>
<a class="sourceLine" id="cb11-26" data-line-number="26"><span class="co">#&gt;  x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb11-27" data-line-number="27"><span class="co">#&gt;  1     2.044    1.503     2.781</span></a>
<a class="sourceLine" id="cb11-28" data-line-number="28"><span class="co">#&gt;  2     1.185    0.846     1.658</span></a>
<a class="sourceLine" id="cb11-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-30" data-line-number="30"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb11-31" data-line-number="31"><span class="co">#&gt; * age = 62.42</span></a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># probability of survival</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="kw">c</span>(<span class="st">"sex"</span>, <span class="st">"ph.ecog"</span>), <span class="dt">type =</span> <span class="st">"surv"</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; # Probability of Survival </span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; # x = time </span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; # male</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; # good</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt;   5     0.997    0.989     1.000</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;  11     0.987    0.971     1.000</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;  12     0.983    0.966     1.000</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;  13     0.977    0.956     0.998</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt;  15     0.973    0.950     0.996</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt;  26     0.970    0.945     0.995</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt;  30     0.966    0.941     0.993</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt;  31     0.963    0.936     0.991</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt;  53     0.956    0.926     0.987</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt;  54     0.953    0.921     0.985</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt;  ... and 174 more rows.</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; # male</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt; # ok</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="co">#&gt;   5     0.995    0.984     1.000</span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="co">#&gt;  11     0.980    0.958     1.000</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="co">#&gt;  12     0.975    0.950     1.000</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="co">#&gt;  13     0.965    0.935     0.996</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="co">#&gt;  15     0.960    0.928     0.993</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="co">#&gt;  26     0.955    0.921     0.990</span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31"><span class="co">#&gt;  30     0.950    0.914     0.987</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="co">#&gt;  31     0.945    0.907     0.984</span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33"><span class="co">#&gt;  53     0.935    0.894     0.977</span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34"><span class="co">#&gt;  54     0.929    0.887     0.974</span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35"><span class="co">#&gt;  ... and 174 more rows.</span></a>
<a class="sourceLine" id="cb12-36" data-line-number="36"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-37" data-line-number="37"><span class="co">#&gt; # male</span></a>
<a class="sourceLine" id="cb12-38" data-line-number="38"><span class="co">#&gt; # limited</span></a>
<a class="sourceLine" id="cb12-39" data-line-number="39"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb12-40" data-line-number="40"><span class="co">#&gt;   5     0.992    0.974     1.000</span></a>
<a class="sourceLine" id="cb12-41" data-line-number="41"><span class="co">#&gt;  11     0.968    0.931     1.000</span></a>
<a class="sourceLine" id="cb12-42" data-line-number="42"><span class="co">#&gt;  12     0.959    0.919     1.000</span></a>
<a class="sourceLine" id="cb12-43" data-line-number="43"><span class="co">#&gt;  13     0.943    0.895     0.994</span></a>
<a class="sourceLine" id="cb12-44" data-line-number="44"><span class="co">#&gt;  15     0.935    0.884     0.990</span></a>
<a class="sourceLine" id="cb12-45" data-line-number="45"><span class="co">#&gt;  26     0.927    0.873     0.985</span></a>
<a class="sourceLine" id="cb12-46" data-line-number="46"><span class="co">#&gt;  30     0.919    0.862     0.981</span></a>
<a class="sourceLine" id="cb12-47" data-line-number="47"><span class="co">#&gt;  31     0.911    0.851     0.976</span></a>
<a class="sourceLine" id="cb12-48" data-line-number="48"><span class="co">#&gt;  53     0.895    0.830     0.966</span></a>
<a class="sourceLine" id="cb12-49" data-line-number="49"><span class="co">#&gt;  54     0.887    0.819     0.961</span></a>
<a class="sourceLine" id="cb12-50" data-line-number="50"><span class="co">#&gt;  ... and 174 more rows.</span></a>
<a class="sourceLine" id="cb12-51" data-line-number="51"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-52" data-line-number="52"><span class="co">#&gt; # female</span></a>
<a class="sourceLine" id="cb12-53" data-line-number="53"><span class="co">#&gt; # good</span></a>
<a class="sourceLine" id="cb12-54" data-line-number="54"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb12-55" data-line-number="55"><span class="co">#&gt;   5     0.998    0.994     1.000</span></a>
<a class="sourceLine" id="cb12-56" data-line-number="56"><span class="co">#&gt;  11     0.992    0.983     1.000</span></a>
<a class="sourceLine" id="cb12-57" data-line-number="57"><span class="co">#&gt;  12     0.990    0.980     1.000</span></a>
<a class="sourceLine" id="cb12-58" data-line-number="58"><span class="co">#&gt;  13     0.986    0.973     1.000</span></a>
<a class="sourceLine" id="cb12-59" data-line-number="59"><span class="co">#&gt;  15     0.984    0.970     0.999</span></a>
<a class="sourceLine" id="cb12-60" data-line-number="60"><span class="co">#&gt;  26     0.982    0.967     0.998</span></a>
<a class="sourceLine" id="cb12-61" data-line-number="61"><span class="co">#&gt;  30     0.980    0.964     0.997</span></a>
<a class="sourceLine" id="cb12-62" data-line-number="62"><span class="co">#&gt;  31     0.978    0.961     0.996</span></a>
<a class="sourceLine" id="cb12-63" data-line-number="63"><span class="co">#&gt;  53     0.974    0.955     0.994</span></a>
<a class="sourceLine" id="cb12-64" data-line-number="64"><span class="co">#&gt;  54     0.972    0.952     0.993</span></a>
<a class="sourceLine" id="cb12-65" data-line-number="65"><span class="co">#&gt;  ... and 174 more rows.</span></a>
<a class="sourceLine" id="cb12-66" data-line-number="66"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-67" data-line-number="67"><span class="co">#&gt; # female</span></a>
<a class="sourceLine" id="cb12-68" data-line-number="68"><span class="co">#&gt; # ok</span></a>
<a class="sourceLine" id="cb12-69" data-line-number="69"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb12-70" data-line-number="70"><span class="co">#&gt;   5     0.997    0.991     1.000</span></a>
<a class="sourceLine" id="cb12-71" data-line-number="71"><span class="co">#&gt;  11     0.988    0.975     1.000</span></a>
<a class="sourceLine" id="cb12-72" data-line-number="72"><span class="co">#&gt;  12     0.985    0.970     1.000</span></a>
<a class="sourceLine" id="cb12-73" data-line-number="73"><span class="co">#&gt;  13     0.980    0.961     0.998</span></a>
<a class="sourceLine" id="cb12-74" data-line-number="74"><span class="co">#&gt;  15     0.977    0.957     0.997</span></a>
<a class="sourceLine" id="cb12-75" data-line-number="75"><span class="co">#&gt;  26     0.974    0.953     0.995</span></a>
<a class="sourceLine" id="cb12-76" data-line-number="76"><span class="co">#&gt;  30     0.971    0.948     0.993</span></a>
<a class="sourceLine" id="cb12-77" data-line-number="77"><span class="co">#&gt;  31     0.968    0.944     0.992</span></a>
<a class="sourceLine" id="cb12-78" data-line-number="78"><span class="co">#&gt;  53     0.962    0.936     0.988</span></a>
<a class="sourceLine" id="cb12-79" data-line-number="79"><span class="co">#&gt;  54     0.959    0.931     0.987</span></a>
<a class="sourceLine" id="cb12-80" data-line-number="80"><span class="co">#&gt;  ... and 174 more rows.</span></a>
<a class="sourceLine" id="cb12-81" data-line-number="81"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-82" data-line-number="82"><span class="co">#&gt; # female</span></a>
<a class="sourceLine" id="cb12-83" data-line-number="83"><span class="co">#&gt; # limited</span></a>
<a class="sourceLine" id="cb12-84" data-line-number="84"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb12-85" data-line-number="85"><span class="co">#&gt;   5     0.995    0.985     1.000</span></a>
<a class="sourceLine" id="cb12-86" data-line-number="86"><span class="co">#&gt;  11     0.981    0.959     1.000</span></a>
<a class="sourceLine" id="cb12-87" data-line-number="87"><span class="co">#&gt;  12     0.976    0.952     1.000</span></a>
<a class="sourceLine" id="cb12-88" data-line-number="88"><span class="co">#&gt;  13     0.967    0.937     0.998</span></a>
<a class="sourceLine" id="cb12-89" data-line-number="89"><span class="co">#&gt;  15     0.962    0.930     0.995</span></a>
<a class="sourceLine" id="cb12-90" data-line-number="90"><span class="co">#&gt;  26     0.957    0.923     0.993</span></a>
<a class="sourceLine" id="cb12-91" data-line-number="91"><span class="co">#&gt;  30     0.952    0.916     0.991</span></a>
<a class="sourceLine" id="cb12-92" data-line-number="92"><span class="co">#&gt;  31     0.948    0.909     0.988</span></a>
<a class="sourceLine" id="cb12-93" data-line-number="93"><span class="co">#&gt;  53     0.938    0.895     0.983</span></a>
<a class="sourceLine" id="cb12-94" data-line-number="94"><span class="co">#&gt;  54     0.933    0.888     0.980</span></a>
<a class="sourceLine" id="cb12-95" data-line-number="95"><span class="co">#&gt;  ... and 174 more rows.</span></a>
<a class="sourceLine" id="cb12-96" data-line-number="96"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-97" data-line-number="97"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb12-98" data-line-number="98"><span class="co">#&gt; * age = 62.42</span></a></code></pre></div>
</div>
<div id="labelling-the-data" class="section level1">
<h1 class="hasAnchor">
<a href="#labelling-the-data" class="anchor"></a>Labelling the data</h1>
<p><strong>ggeffects</strong> makes use of the <a href="https://cran.r-project.org/package=sjlabelled">sjlabelled-package</a> and supports <a href="https://cran.r-project.org/package=sjlabelled/vignettes/intro_sjlabelled.html">labelled data</a>. If the data from the fitted models is labelled, the value and variable label attributes are usually copied to the model frame stored in the model object. <strong>ggeffects</strong> provides various <em>getter</em>-functions to access these labels, which are returned as character vector and can be used in ggplot’s <code>lab()</code>- or <code>scale_*()</code>-functions.</p>
<ul>
<li>
<code><a href="../reference/get_title.html">get_title()</a></code> - a generic title for the plot, based on the model family, like “predicted values” or “predicted probabilities”</li>
<li>
<code><a href="../reference/get_title.html">get_x_title()</a></code> - the variable label of the first model term in <code>terms</code>.</li>
<li>
<code><a href="../reference/get_title.html">get_y_title()</a></code> - the variable label of the response.</li>
<li>
<code><a href="../reference/get_title.html">get_legend_title()</a></code> - the variable label of the second model term in <code>terms</code>.</li>
<li>
<code><a href="../reference/get_title.html">get_x_labels()</a></code> - value labels of the first model term in <code>terms</code>.</li>
<li>
<code><a href="../reference/get_title.html">get_legend_labels()</a></code> - value labels of the second model term in <code>terms</code>.</li>
</ul>
<p>The data frame returned by <code><a href="../reference/ggpredict.html">ggpredict()</a></code> or <code><a href="../reference/ggpredict.html">ggaverage()</a></code> must be used as argument to one of the above function calls.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../reference/get_title.html">get_x_title</a></span>(mydf)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [1] "average number of hours of care per week"</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw"><a href="../reference/get_title.html">get_y_title</a></span>(mydf)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; [1] "Negative impact with 7 items"</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>facet) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">    <span class="dt">x =</span> <span class="kw"><a href="../reference/get_title.html">get_x_title</a></span>(mydf),</a>
<a class="sourceLine" id="cb13-11" data-line-number="11">    <span class="dt">y =</span> <span class="kw"><a href="../reference/get_title.html">get_y_title</a></span>(mydf),</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">    <span class="dt">colour =</span> <span class="kw"><a href="../reference/get_title.html">get_legend_title</a></span>(mydf)</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">  )</a></code></pre></div>
<p><img src="marginaleffects_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#aim-of-the-ggeffects-package">Aim of the ggeffects-package</a></li>
      <li><a href="#consistent-and-tidy-structure">Consistent and tidy structure</a></li>
      <li><a href="#marginal-effects-at-the-mean">Marginal effects at the mean</a></li>
      <li><a href="#marginal-effects-at-the-mean-for-different-groups">Marginal effects at the mean for different groups</a></li>
      <li><a href="#marginal-effects-for-each-model-term">Marginal effects for each model term</a></li>
      <li><a href="#average-marginal-effects">Average marginal effects</a></li>
      <li><a href="#two--and-three-way-interactions">Two- and Three-Way-Interactions</a></li>
      <li><a href="#polynomial-terms-and-splines">Polynomial terms and splines</a></li>
      <li><a href="#survival-models">Survival models</a></li>
      <li><a href="#labelling-the-data">Labelling the data</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
