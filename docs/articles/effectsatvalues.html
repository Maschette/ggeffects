<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marginal Effects at Specific Values • ggeffects</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Marginal Effects at Specific Values">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggeffects</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/effectsatvalues.html">Marginal Effects at Specific Values</a>
    </li>
    <li>
      <a href="../articles/marginaleffects.html">Marginal Effects of Regression Models</a>
    </li>
    <li>
      <a href="../articles/plotmethod.html">Plotting Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/randomeffects.html">Marginal Effects for Random Effects Models</a>
    </li>
    <li>
      <a href="../articles/stata.html">Different Output between Stata and ggeffects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Marginal Effects at Specific Values</h1>
                        <h4 class="author">Daniel Lüdecke</h4>
            
            <h4 class="date">2019-01-02</h4>
      
      
      <div class="hidden name"><code>effectsatvalues.Rmd</code></div>

    </div>

    
    
<div id="marginal-effects-at-specific-values-or-levels" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-at-specific-values-or-levels" class="anchor"></a>Marginal effects at specific values or levels</h1>
<p>This vignettes shows how to calculate marginal effects at specific values or levels for the terms of interest. It is recommended to read the <a href="marginaleffects.html">general introduction</a> first, if you haven’t done this yet.</p>
<p>The <code>terms</code>-argument not only defines the model terms of interest, but each model term can be limited to certain values. This allows to compute and plot marginal effects for (grouping) terms at specific values only, or to define values for the main effect of interest.</p>
<p>There are several options to define these values, which always should be placed in square brackets directly after the term name and can vary for each model term.</p>
<ol style="list-style-type: decimal">
<li><p>Concrete values are separated by a comma: <code>terms = "c172code [1,3]"</code>. For factors, you could also use factor levels, e.g. <code>terms = "Species [setosa,versicolor]"</code>.</p></li>
<li><p>Ranges are specified with a colon: <code>terms = c("c12hour [30:80]", "c172code [1,3]")</code>. This would plot all values from 30 to 80 for the variable <em>c12hour</em>.</p></li>
<li><p>Convenient shortcuts to calculate common values like mean +/- 1 SD (<code>terms = "c12hour [meansd]"</code>), quartiles (<code>terms = "c12hour [quart]"</code>) or minumum and maximum values (<code>terms = "c12hour [mixmax]"</code>). See <code><a href="../reference/rprs_values.html">rprs_values()</a></code> for the different options.</p></li>
<li><p>A function name. The function is then applied to all unique values of the indicated variable, e.g. <code>terms = "hp [exp]"</code>. You can also define own functions, and pass the name of it to the <code>terms</code>-values, e.g. <code>terms = "hp [own_function]"</code>.</p></li>
<li><p>If the <em>first</em> variable specified in <code>terms</code> is a <em>numeric</em> vector, for which no specific values are given, a “pretty range” is calculated (see <code><a href="../reference/pretty_range.html">pretty_range()</a></code>), to avoid memory allocation problems for vectors with many unique values. If a <em>numeric</em> vector is specified as <em>second</em> or <em>third</em> variable in <code>term</code> (i.e. if this vector represents a grouping structure), representative values (see <code><a href="../reference/rprs_values.html">rprs_values()</a></code>) are chosen.</p></li>
<li><p>To create a pretty range that should be smaller or larger than the default range (i.e. if no specific values would be given), use the <code>n</code>-tag, e.g. <code>terms = "age [n=5]"</code> or <code>terms = "age [n = 12]"</code>. Larger values for <code>n</code> return a larger range of predicted values.</p></li>
<li><p>Especially useful for plotting group levels of random effects with many levels, is the <code>sample</code>-option, e.g. <code>terms = "Subject [sample=9]"</code>, which will sample nine values from all possible values of the variable <code>Subject</code>.</p></li>
</ol>
<div id="specific-values-and-value-range" class="section level2">
<h2 class="hasAnchor">
<a href="#specific-values-and-value-range" class="anchor"></a>Specific values and value range</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggeffects)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(efc)
fit &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(barthtot <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span>neg_c_<span class="dv">7</span> <span class="op">+</span><span class="st"> </span>c161sex <span class="op">+</span><span class="st"> </span>c172code, <span class="dt">data =</span> efc)

mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"c12hour [30:80]"</span>, <span class="st">"c172code [1,3]"</span>))
mydf
<span class="co">#&gt; </span>
<span class="co">#&gt; # Predicted values of Total score BARTHEL INDEX </span>
<span class="co">#&gt; # x = average number of hours of care per week </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = low level of education</span>
<span class="co">#&gt;   x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;  30    67.147     1.587   64.037    70.257</span>
<span class="co">#&gt;  38    65.121     1.562   62.059    68.183</span>
<span class="co">#&gt;  47    62.841     1.549   59.806    65.877</span>
<span class="co">#&gt;  55    60.815     1.550   57.777    63.853</span>
<span class="co">#&gt;  63    58.788     1.564   55.723    61.854</span>
<span class="co">#&gt;  80    54.482     1.632   51.283    57.682</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # c172code = high level of education</span>
<span class="co">#&gt;   x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;  30    68.584     1.616   65.417    71.751</span>
<span class="co">#&gt;  38    66.558     1.616   63.390    69.725</span>
<span class="co">#&gt;  47    64.278     1.631   61.082    67.474</span>
<span class="co">#&gt;  55    62.252     1.656   59.006    65.497</span>
<span class="co">#&gt;  63    60.225     1.692   56.908    63.542</span>
<span class="co">#&gt;  80    55.919     1.803   52.386    59.452</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; * neg_c_7 = 11.84</span>
<span class="co">#&gt; * c161sex =  1.76</span>
<span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-1-1.png" width="672"></p>
<p>Defining value ranges is especially useful when variables are, for instance, log-transformed. <code><a href="../reference/ggpredict.html">ggpredict()</a></code> then typically only uses the range of the log-transformed variable, which is in most cases not what we want. In such situation, specify the range in the <code>terms</code>-argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(mtcars)
mpg_model &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(mpg <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">log</a></span>(hp), <span class="dt">data =</span> mtcars)

<span class="co"># x-values and predictions based on the log(hp)-values</span>
<span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; # Predicted values of mpg </span>
<span class="co">#&gt; # x = hp </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;  3.8    58.270     4.380   49.685    66.855</span>
<span class="co">#&gt;  4.0    57.718     4.318   49.255    66.181</span>
<span class="co">#&gt;  4.4    56.692     4.202   48.456    64.928</span>
<span class="co">#&gt;  4.6    56.214     4.148   48.083    64.344</span>
<span class="co">#&gt;  4.8    55.756     4.097   47.726    63.785</span>
<span class="co">#&gt;  5.0    55.316     4.047   47.384    63.249</span>
<span class="co">#&gt;  5.2    54.894     4.000   47.055    62.733</span>
<span class="co">#&gt;  5.8    53.719     3.867   46.139    61.299</span>

<span class="co"># x-values and predictions based on hp-values from 50 to 150</span>
<span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [50:150]"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; # Predicted values of mpg </span>
<span class="co">#&gt; # x = hp </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;   50    30.531     1.318   27.947    33.115</span>
<span class="co">#&gt;   63    28.043     1.071   25.945    30.141</span>
<span class="co">#&gt;   75    26.166     0.897   24.407    27.925</span>
<span class="co">#&gt;   87    24.569     0.766   23.067    26.071</span>
<span class="co">#&gt;  100    23.070     0.665   21.765    24.374</span>
<span class="co">#&gt;  113    21.754     0.603   20.572    22.936</span>
<span class="co">#&gt;  125    20.668     0.576   19.538    21.797</span>
<span class="co">#&gt;  150    18.705     0.594   17.541    19.869</span></code></pre></div>
</div>
<div id="choosing-representative-values" class="section level2">
<h2 class="hasAnchor">
<a href="#choosing-representative-values" class="anchor"></a>Choosing representative values</h2>
<p>Especially in situations where we have two continuous variables in interaction terms, or where the “grouping” variable is continuous, it is helpful to select representative values of the grouping variable - else, predictions would be made for too many groups, which is no longer helpful when interpreting marginal effects.</p>
<p>You can use</p>
<ul>
<li>
<code>"minmax"</code>: minimum and maximum values (lower and upper bounds) of the variable are used.</li>
<li>
<code>"meansd"</code>: uses the mean value as well as one standard deviation below and above mean value.</li>
<li>
<code>"zeromax"</code>: is similar to the <code>"minmax"</code> option, however, 0 is always used as minimum value. This may be useful for predictors that don’t have an empirical zero-value.</li>
<li>
<code>"quart"</code> calculates and uses the quartiles (lower, median and upper), <em>including</em> minimum and maximum value.</li>
<li>
<code>"quart2"</code> calculates and uses the quartiles (lower, median and upper), <em>excluding</em> minimum and maximum value.</li>
<li>
<code>"all"</code> takes all values of the vector.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(efc)
<span class="co"># short variable label, for plot</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attr">attr</a></span>(efc<span class="op">$</span>c12hour, <span class="st">"label"</span>) &lt;-<span class="st"> "hours of care"</span>
fit &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(barthtot <span class="op">~</span><span class="st"> </span>c12hour <span class="op">*</span><span class="st"> </span>c161sex <span class="op">+</span><span class="st"> </span>neg_c_<span class="dv">7</span>, <span class="dt">data =</span> efc)

mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"c161sex"</span>, <span class="st">"c12hour [meansd]"</span>))
<span class="kw"><a href="../reference/plot.html">plot</a></span>(mydf)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"c161sex"</span>, <span class="st">"c12hour [quart]"</span>))
<span class="kw"><a href="../reference/plot.html">plot</a></span>(mydf)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-3-2.png" width="672"></p>
</div>
<div id="transforming-values-with-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#transforming-values-with-functions" class="anchor"></a>Transforming values with functions</h2>
<p>The brackets in the <code>terms</code>-argument also accept the name of a valid function, to (back-)transform predicted valued. In this example, an alternative would be to specify that values should be exponentiated, which is indicated by <code>[exp]</code> in the <code>terms</code>-argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># x-values and predictions based on exponentiated hp-values</span>
<span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [exp]"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; # Predicted values of mpg </span>
<span class="co">#&gt; # x = hp </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;   52    30.109     1.275   27.609    32.608</span>
<span class="co">#&gt;   66    27.542     1.023   25.537    29.547</span>
<span class="co">#&gt;   93    23.851     0.715   22.450    25.252</span>
<span class="co">#&gt;  105    22.544     0.637   21.296    23.793</span>
<span class="co">#&gt;  113    21.754     0.603   20.572    22.936</span>
<span class="co">#&gt;  150    18.705     0.594   17.541    19.869</span>
<span class="co">#&gt;  205    15.343     0.787   13.800    16.885</span>
<span class="co">#&gt;  335    10.056     1.277    7.553    12.559</span></code></pre></div>
<p>It is possible to define any function, also custom functions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># x-values and predictions based on doubled hp-values</span>
hp_double &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="dv">2</span> <span class="op">*</span><span class="st"> </span>x
<span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [hp_double]"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; # Predicted values of mpg </span>
<span class="co">#&gt; # x = hp </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;       x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;   7.902    50.389     3.493   43.542    57.236</span>
<span class="co">#&gt;   8.379    49.758     3.423   43.050    56.467</span>
<span class="co">#&gt;   9.065    48.911     3.328   42.389    55.434</span>
<span class="co">#&gt;   9.308    48.627     3.296   42.167    55.087</span>
<span class="co">#&gt;   9.455    48.459     3.277   42.036    54.881</span>
<span class="co">#&gt;  10.021    47.832     3.207   41.547    54.117</span>
<span class="co">#&gt;  10.646    47.181     3.134   41.039    53.324</span>
<span class="co">#&gt;  11.628    46.231     3.028   40.297    52.166</span></code></pre></div>
</div>
<div id="pretty-value-ranges" class="section level2">
<h2 class="hasAnchor">
<a href="#pretty-value-ranges" class="anchor"></a>Pretty value ranges</h2>
<p>This section is intended to show some examples how the plotted output differs, depending on which value range is used. Some transformations, like polynomial or spline terms, but also quadratic or cubic terms, result in many predicted values. In such situation, predictions for some models lead to memory allocation problems. That is why <code><a href="../reference/ggpredict.html">ggpredict()</a></code> “prettifies” certain value ranges by default, at least for some model types (like mixed models).</p>
<p>To see the difference in the “curvilinear” trend, we use a quadratic term on a standardized variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sjmisc)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sjlabelled)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(lme4)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(efc)

efc<span class="op">$</span>c12hour &lt;-<span class="st"> </span><span class="kw">std</span>(efc<span class="op">$</span>c12hour)
efc<span class="op">$</span>e15relat &lt;-<span class="st"> </span><span class="kw">as_label</span>(efc<span class="op">$</span>e15relat)

m &lt;-<span class="st"> </span><span class="kw">lmer</span>(
  barthtot <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/AsIs">I</a></span>(c12hour<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span>neg_c_<span class="dv">7</span> <span class="op">+</span><span class="st"> </span>c160age <span class="op">+</span><span class="st"> </span>c172code <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>e15relat), 
  <span class="dt">data =</span> efc
)

me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<div id="turn-off-prettifying" class="section level3">
<h3 class="hasAnchor">
<a href="#turn-off-prettifying" class="anchor"></a>Turn off “prettifying”</h3>
<p>As said above, <code><a href="../reference/ggpredict.html">ggpredict()</a></code> “prettifies” the vector, resulting in a smaller set of unique values. This is less memory consuming and may be needed especially for more complex models.</p>
<p>You can turn off automatic “prettifying” by adding the <code>"all"</code>-shortcut to the <code>terms</code>-argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour [all]"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<p>This results in a smooth plot, as all values from the term of interest are taken into account.</p>
</div>
<div id="using-different-ranges-for-prettifying" class="section level3">
<h3 class="hasAnchor">
<a href="#using-different-ranges-for-prettifying" class="anchor"></a>Using different ranges for prettifying</h3>
<p>To modify the “prettifying”, add the <code>"n"</code>-shortcut to the <code>terms</code>-argument. This allows you to select a feasible range of values that is smaller (and hence less memory consuming) them <code>terms = ... ["all"]</code>, but still produces smoother plots than the default prettyfing.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour [n=2]"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour [n=10]"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</div>
</div>
<div id="marginal-effects-conditioned-on-specific-values-of-the-covariates" class="section level2">
<h2 class="hasAnchor">
<a href="#marginal-effects-conditioned-on-specific-values-of-the-covariates" class="anchor"></a>Marginal effects conditioned on specific values of the covariates</h2>
<p>By default, the <code>typical</code>-argument determines the function that will be applied to the covariates to hold these terms at constant values. By default, this is the mean-value, but other options (like median or mode) are possible as well.</p>
<p>Use the <code>condition</code>-argument to define other values at which covariates should be held constant. <code>condition</code> requires a named vector, with the name indicating the covariate.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(mtcars)
mpg_model &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(mpg <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">log</a></span>(hp) <span class="op">+</span><span class="st"> </span>disp, <span class="dt">data =</span> mtcars)

<span class="co"># "disp" is hold constant at its mean</span>
<span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [exp]"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; # Predicted values of mpg </span>
<span class="co">#&gt; # x = hp </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;   52    25.609     1.873   21.938    29.281</span>
<span class="co">#&gt;   66    24.195     1.434   21.384    27.006</span>
<span class="co">#&gt;   93    22.162     0.846   20.503    23.821</span>
<span class="co">#&gt;  105    21.442     0.673   20.123    22.762</span>
<span class="co">#&gt;  113    21.007     0.590   19.851    22.163</span>
<span class="co">#&gt;  150    19.327     0.566   18.218    20.437</span>
<span class="co">#&gt;  205    17.475     0.994   15.526    19.424</span>
<span class="co">#&gt;  335    14.563     1.876   10.886    18.240</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Adjusted for:</span>
<span class="co">#&gt; * disp = 230.72</span>

<span class="co"># "disp" is hold constant at value 200</span>
<span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [exp]"</span>, <span class="dt">condition =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dt">disp =</span> <span class="dv">200</span>))
<span class="co">#&gt; </span>
<span class="co">#&gt; # Predicted values of mpg </span>
<span class="co">#&gt; # x = hp </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    x predicted std.error conf.low conf.high</span>
<span class="co">#&gt;   52    26.297     1.697   22.971    29.623</span>
<span class="co">#&gt;   66    24.883     1.266   22.402    27.364</span>
<span class="co">#&gt;   93    22.850     0.716   21.447    24.253</span>
<span class="co">#&gt;  105    22.130     0.582   20.990    23.271</span>
<span class="co">#&gt;  113    21.695     0.536   20.645    22.745</span>
<span class="co">#&gt;  150    20.015     0.683   18.676    21.354</span>
<span class="co">#&gt;  205    18.163     1.168   15.874    20.452</span>
<span class="co">#&gt;  335    15.251     2.063   11.208    19.294</span></code></pre></div>
</div>
<div id="marginal-effects-for-each-level-of-random-effects" class="section level2">
<h2 class="hasAnchor">
<a href="#marginal-effects-for-each-level-of-random-effects" class="anchor"></a>Marginal effects for each level of random effects</h2>
<p>Marginal effects can also be calculated for each group level in mixed models. Simply add the name of the related random effects term to the <code>terms</code>-argument, and set <code>type = "re"</code>.</p>
<p>In the following example, we fit a linear mixed model and first simply plot the marginal effetcs, <em>not</em> conditioned on random effects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sjlabelled)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(lme4)
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(efc)
efc<span class="op">$</span>e15relat &lt;-<span class="st"> </span><span class="kw">as_label</span>(efc<span class="op">$</span>e15relat)
m &lt;-<span class="st"> </span><span class="kw">lmer</span>(neg_c_<span class="dv">7</span> <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span>c160age <span class="op">+</span><span class="st"> </span>c161sex <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>e15relat), <span class="dt">data =</span> efc)
me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
<p>Changing the type to <code>type = "re"</code> still returns population-level predictions by default. The major difference between <code>type = "fe"</code> and <code>type = "re"</code> is the uncertainty in the variance parameters. This leads to larger confidence intervals for marginal effects with <code>type = "re"</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour"</span>, <span class="dt">type =</span> <span class="st">"re"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
<p>To compute marginal effects for each grouping level, add the related random term to the <code>terms</code>-argument. In this case, confidence intervals are not calculated, but marginal effects are conditioned on each group level of the random effects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"c12hour"</span>, <span class="st">"e15relat"</span>), <span class="dt">type =</span> <span class="st">"re"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
<p>Marginal effects, conditioned on random effects, can also be calculated for specific levels only. Add the related values into brackets after the variable name in the <code>terms</code>-argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"c12hour"</span>, <span class="st">"e15relat [child,sibling]"</span>), <span class="dt">type =</span> <span class="st">"re"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-14-1.png" width="672"></p>
<p>If the group factor has too many levels, you can also take a random sample of all possible levels and plot the marginal effects for this subsample of group levels. To do this, use <code>term = "&lt;groupfactor&gt; [sample=n]"</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"sleepstudy"</span>)
m &lt;-<span class="st"> </span><span class="kw">lmer</span>(Reaction <span class="op">~</span><span class="st"> </span>Days <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>Days <span class="op">|</span><span class="st"> </span>Subject), <span class="dt">data =</span> sleepstudy)
me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Days"</span>, <span class="st">"Subject [sample=8]"</span>), <span class="dt">type =</span> <span class="st">"re"</span>)
<span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#marginal-effects-at-specific-values-or-levels">Marginal effects at specific values or levels</a><ul class="nav nav-pills nav-stacked">
<li><a href="#specific-values-and-value-range">Specific values and value range</a></li>
      <li><a href="#choosing-representative-values">Choosing representative values</a></li>
      <li><a href="#transforming-values-with-functions">Transforming values with functions</a></li>
      <li><a href="#pretty-value-ranges">Pretty value ranges</a></li>
      <li><a href="#marginal-effects-conditioned-on-specific-values-of-the-covariates">Marginal effects conditioned on specific values of the covariates</a></li>
      <li><a href="#marginal-effects-for-each-level-of-random-effects">Marginal effects for each level of random effects</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
