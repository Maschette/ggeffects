<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marginal Effects at Specific Values • ggeffects</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Marginal Effects at Specific Values">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggeffects</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.6.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/effectsatvalues.html">Marginal Effects at Specific Values</a>
    </li>
    <li>
      <a href="../articles/marginaleffects.html">Tidy Data Frames of Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/plotmethod.html">Plotting Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/stata.html">Different Output between Stata and ggeffects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Marginal Effects at Specific Values</h1>
                        <h4 class="author">Daniel Lüdecke</h4>
            
            <h4 class="date">2018-10-26</h4>
      
      
      <div class="hidden name"><code>effectsatvalues.Rmd</code></div>

    </div>

    
    
<div id="marginal-effects-at-specific-values-or-levels" class="section level1">
<h1 class="hasAnchor">
<a href="#marginal-effects-at-specific-values-or-levels" class="anchor"></a>Marginal effects at specific values or levels</h1>
<p>This vignettes shows how to calculate marginal effects at specific values or levels for the terms of interest. It is recommended to read the <a href="marginaleffects.html">general introduction</a> first, if you haven’t done this yet.</p>
<p>The <code>terms</code>-argument not only defines the model terms of interest, but each model term can be limited to certain values. This allows to compute and plot marginal effects for (grouping) terms at specific values only, or to define values for the main effect of interest.</p>
<p>There are several options to define these values, which always should be placed in square brackets directly after the term name and can vary for each model term.</p>
<ol style="list-style-type: decimal">
<li>Concrete values are separated by a comma: <code>terms = "c172code [1,3]"</code>. For factors, you could also use factor levels, e.g. <code>terms = "Species [setosa,versicolor]"</code>.</li>
<li>Ranges are specified with a colon: <code>terms = c("c12hour [30:80]", "c172code [1,3]")</code>. This would plot all values from 30 to 80 for the variable <em>c12hour</em>.</li>
<li>Convenient shortcuts to calculate common values like mean +/- 1 SD (<code>terms = "c12hour [meansd]"</code>), quartiles (<code>terms = "c12hour [quart]"</code>) or minumum and maximum values (<code>terms = "c12hour [mixmax]"</code>). See <code><a href="../reference/rprs_values.html">rprs_values()</a></code> for the different options.</li>
<li>A function name. The function is then applied to all unique values of the indicated variable, e.g. <code>terms = "hp [exp]"</code>.</li>
<li>Finally, if the <em>first</em> variable specified in <code>terms</code> is a <em>numeric</em> vector for which no specific values are given, a “pretty range” is calculated (see <code><a href="../reference/pretty_range.html">pretty_range()</a></code>), to avoid memory allocation problems for vectors with many unique values. If a <em>numeric</em> vector is specified as second or third variable in <code>term</code> (i.e. if this vector represents a grouping structure), representative values (see <code><a href="../reference/rprs_values.html">rprs_values()</a></code>) are chosen.</li>
<li>To create a pretty range that should be smaller or larger than the default range (i.e. if no specific values would be given), use the <code>n</code>-tag, e.g. <code>terms = "age [n=5]"</code> or <code>terms = "age [n = 12]"</code>. Larger values for <code>n</code> return a larger range of predicted values.</li>
</ol>
<div id="specific-values-and-value-range" class="section level2">
<h2 class="hasAnchor">
<a href="#specific-values-and-value-range" class="anchor"></a>Specific values and value range</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(ggeffects)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">data</span>(efc)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(barthtot <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span>neg_c_<span class="dv">7</span> <span class="op">+</span><span class="st"> </span>c161sex <span class="op">+</span><span class="st"> </span>c172code, <span class="dt">data =</span> efc)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour [30:80]"</span>, <span class="st">"c172code [1,3]"</span>))</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">mydf</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; # Predicted values for Total score BARTHEL INDEX </span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; # x = average number of hours of care per week </span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; # low level of education</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt;  30    67.147   64.037    70.257</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;  31    66.894   63.791    69.997</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;  32    66.641   63.545    69.736</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;  33    66.387   63.298    69.477</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;  34    66.134   63.051    69.217</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt;  35    65.881   62.804    68.958</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt;  36    65.628   62.556    68.699</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt;  37    65.374   62.308    68.441</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt;  38    65.121   62.059    68.183</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt;  39    64.868   61.810    67.925</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt;  ... and 41 more rows.</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; # high level of education</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt;  30    68.584   65.417    71.751</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="co">#&gt;  31    68.331   65.165    71.497</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"><span class="co">#&gt;  32    68.077   64.912    71.243</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31"><span class="co">#&gt;  33    67.824   64.660    70.989</span></a>
<a class="sourceLine" id="cb1-32" data-line-number="32"><span class="co">#&gt;  34    67.571   64.406    70.735</span></a>
<a class="sourceLine" id="cb1-33" data-line-number="33"><span class="co">#&gt;  35    67.318   64.153    70.482</span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"><span class="co">#&gt;  36    67.064   63.899    70.230</span></a>
<a class="sourceLine" id="cb1-35" data-line-number="35"><span class="co">#&gt;  37    66.811   63.645    69.977</span></a>
<a class="sourceLine" id="cb1-36" data-line-number="36"><span class="co">#&gt;  38    66.558   63.390    69.725</span></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"><span class="co">#&gt;  39    66.304   63.135    69.474</span></a>
<a class="sourceLine" id="cb1-38" data-line-number="38"><span class="co">#&gt;  ... and 41 more rows.</span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-40" data-line-number="40"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41"><span class="co">#&gt; * neg_c_7 = 11.84</span></a>
<a class="sourceLine" id="cb1-42" data-line-number="42"><span class="co">#&gt; * c161sex = 1.76</span></a>
<a class="sourceLine" id="cb1-43" data-line-number="43"><span class="kw">ggplot</span>(mydf, <span class="kw">aes</span>(x, predicted, <span class="dt">colour =</span> group)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-1-1.png" width="672"></p>
<p>Defining value ranges is especially useful when variables are, for instance, log-transformed. <code><a href="../reference/ggpredict.html">ggpredict()</a></code> then typically only uses the range of the log-transformed variable, which is in most cases not what we want. In such situation, specify the range in the <code>terms</code>-argument.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">mpg_model &lt;-<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span><span class="kw">log</span>(hp), <span class="dt">data =</span> mtcars)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># x-values and predictions based on the log(hp)-values</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp"</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; # Predicted values for mpg </span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; # x = hp </span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;    x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  3.8    58.270   49.685    66.855</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;  4.0    57.718   49.255    66.181</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  4.2    57.193   48.846    65.540</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  4.4    56.692   48.456    64.928</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  4.6    56.214   48.083    64.344</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  4.8    55.756   47.726    63.785</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  5.0    55.316   47.384    63.249</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  5.2    54.894   47.055    62.733</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;  5.4    54.488   46.738    62.237</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;  5.6    54.096   46.433    61.760</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt;  ... and 1 more rows.</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co"># x-values and predictions based on hp-values from 50 to 150</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [50:150]"</span>)</a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; # Predicted values for mpg </span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; # x = hp </span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt;   x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt;  50    30.531   27.947    33.115</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt;  51    30.318   27.776    32.859</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co">#&gt;  52    30.109   27.609    32.608</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">#&gt;  53    29.904   27.445    32.362</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">#&gt;  54    29.702   27.283    32.121</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="co">#&gt;  55    29.505   27.125    31.885</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"><span class="co">#&gt;  56    29.311   26.969    31.653</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="co">#&gt;  57    29.120   26.816    31.425</span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"><span class="co">#&gt;  58    28.933   26.665    31.202</span></a>
<a class="sourceLine" id="cb2-39" data-line-number="39"><span class="co">#&gt;  59    28.749   26.516    30.982</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"><span class="co">#&gt;  ... and 91 more rows.</span></a></code></pre></div>
</div>
<div id="choosing-representative-values" class="section level2">
<h2 class="hasAnchor">
<a href="#choosing-representative-values" class="anchor"></a>Choosing representative values</h2>
<p>Especially in situations where we have two continuous variables in interaction terms, or where the “grouping” variable is continuous, it is helpful to select representative values of the grouping variable - else, predictions would be made for too many groups, which is no longer helpful when interpreting marginal effects.</p>
<p>You can use</p>
<ul>
<li>
<code>"minmax"</code>: minimum and maximum values (lower and upper bounds) of the variable are used.</li>
<li>
<code>"meansd"</code>: uses the mean value as well as one standard deviation below and above mean value.</li>
<li>
<code>"zeromax"</code>: is similar to the <code>"minmax"</code> option, however, 0 is always used as minimum value. This may be useful for predictors that don’t have an empirical zero-value.</li>
<li>
<code>"quart"</code> calculates and uses the quartiles (lower, median and upper), <em>including</em> minimum and maximum value.</li>
<li>
<code>"quart2"</code> calculates and uses the quartiles (lower, median and upper), <em>excluding</em> minimum and maximum value.</li>
<li>
<code>"all"</code> takes all values of the vector.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">data</span>(efc)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co"># short variable label, for plot</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">attr</span>(efc<span class="op">$</span>c12hour, <span class="st">"label"</span>) &lt;-<span class="st"> "hours of care"</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">fit &lt;-<span class="st"> </span><span class="kw">lm</span>(barthtot <span class="op">~</span><span class="st"> </span>c12hour <span class="op">*</span><span class="st"> </span>c161sex <span class="op">+</span><span class="st"> </span>neg_c_<span class="dv">7</span>, <span class="dt">data =</span> efc)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c161sex"</span>, <span class="st">"c12hour [meansd]"</span>))</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="kw"><a href="../reference/plot.html">plot</a></span>(mydf)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">mydf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(fit, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c161sex"</span>, <span class="st">"c12hour [quart]"</span>))</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="../reference/plot.html">plot</a></span>(mydf)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-3-2.png" width="672"></p>
</div>
<div id="transforming-values-with-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#transforming-values-with-functions" class="anchor"></a>Transforming values with functions</h2>
<p>The brackets in the <code>terms</code>-argument also accept the name of a valid function, to (back-)transform predicted valued. In this example, an alternative would be to specify that values should be exponentiated, which is indicated by <code>[exp]</code> in the <code>terms</code>-argument:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># x-values and predictions based on exponentiated hp-values</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [exp]"</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; # Predicted values for mpg </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; # x = hp </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;    x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt;   52    30.109   27.609    32.608</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;   62    28.215   26.085    30.346</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   65    27.707   25.671    29.742</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   66    27.542   25.537    29.547</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;   91    24.085   22.652    25.517</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;   93    23.851   22.450    25.252</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;   95    23.622   22.251    24.993</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt;   97    23.397   22.055    24.740</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt;  105    22.544   21.296    23.793</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt;  109    22.142   20.930    23.354</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt;  ... and 12 more rows.</span></a></code></pre></div>
</div>
<div id="pretty-value-ranges" class="section level2">
<h2 class="hasAnchor">
<a href="#pretty-value-ranges" class="anchor"></a>Pretty value ranges</h2>
<p>This section is intended to show some examples how the plotted output differs, depending on which value range is used. To see the difference in the “curvilinear” trend, we use a quadratic term on a standardized variable.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">library</span>(sjmisc)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">data</span>(efc)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">efc<span class="op">$</span>c12hour &lt;-<span class="st"> </span><span class="kw">std</span>(efc<span class="op">$</span>c12hour)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">m &lt;-<span class="st"> </span><span class="kw">lm</span>(barthtot <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(c12hour<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span>neg_c_<span class="dv">7</span> <span class="op">+</span><span class="st"> </span>c160age <span class="op">+</span><span class="st"> </span>c172code, <span class="dt">data =</span> efc)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour"</span>)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<div id="turn-off-prettifying" class="section level3">
<h3 class="hasAnchor">
<a href="#turn-off-prettifying" class="anchor"></a>Turn off “prettifying”</h3>
<p><code><a href="../reference/ggpredict.html">ggpredict()</a></code> “prettifies” the vector, resulting in a smaller set of unique values. This is less memory consuming and may be needed especially for more complex models.</p>
<p>You can turn off automatic “prettifying” by adding the <code>"all"</code>-shortcut to the <code>terms</code>-argument.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour [all]"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<p>This results in a smooth plot, as all values from the term of interest are taken into account.</p>
</div>
<div id="using-different-ranges-for-prettifying" class="section level3">
<h3 class="hasAnchor">
<a href="#using-different-ranges-for-prettifying" class="anchor"></a>Using different ranges for prettifying</h3>
<p>To modify the “prettifying”, add the <code>"n"</code>-shortcut to the <code>terms</code>-argument. This allows you to select a feasible range of values that is smaller (and hence less memory consuming) them <code>terms = ... ["all"]</code>, but still produces smoother plots than the default prettyfing.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour [n=5]"</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour [n=20]"</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
</div>
</div>
<div id="marginal-effects-conditioned-on-specific-values-of-the-covariates" class="section level2">
<h2 class="hasAnchor">
<a href="#marginal-effects-conditioned-on-specific-values-of-the-covariates" class="anchor"></a>Marginal effects conditioned on specific values of the covariates</h2>
<p>By default, the <code>typical</code>-argument determines the function that will be applied to the covariates to hold these terms at constant values. By default, this is the mean-value, but other options (like median or mode) are possible as well.</p>
<p>Use the <code>condition</code>-argument to define other values at which covariates should be held constant. <code>condition</code> requires a named vector, with the name indicating the covariate.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">mpg_model &lt;-<span class="st"> </span><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span><span class="kw">log</span>(hp) <span class="op">+</span><span class="st"> </span>disp, <span class="dt">data =</span> mtcars)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co"># "disp" is hold constant at its mean</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [exp]"</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; # Predicted values for mpg </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; # x = hp </span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;    x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;   52    25.609   21.938    29.281</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;   62    24.566   21.532    27.600</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;   65    24.286   21.421    27.151</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt;   66    24.195   21.384    27.006</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt;   91    22.291   20.565    24.016</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt;   93    22.162   20.503    23.821</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt;   95    22.036   20.441    23.631</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt;   97    21.912   20.378    23.446</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt;  105    21.442   20.123    22.762</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt;  109    21.221   19.989    22.452</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt;  ... and 12 more rows.</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-23" data-line-number="23"><span class="co">#&gt; Adjusted for:</span></a>
<a class="sourceLine" id="cb10-24" data-line-number="24"><span class="co">#&gt; * disp = 230.72</span></a>
<a class="sourceLine" id="cb10-25" data-line-number="25"></a>
<a class="sourceLine" id="cb10-26" data-line-number="26"><span class="co"># "disp" is hold constant at value 200</span></a>
<a class="sourceLine" id="cb10-27" data-line-number="27"><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(mpg_model, <span class="st">"hp [exp]"</span>, <span class="dt">condition =</span> <span class="kw">c</span>(<span class="dt">disp =</span> <span class="dv">200</span>))</a>
<a class="sourceLine" id="cb10-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-29" data-line-number="29"><span class="co">#&gt; # Predicted values for mpg </span></a>
<a class="sourceLine" id="cb10-30" data-line-number="30"><span class="co">#&gt; # x = hp </span></a>
<a class="sourceLine" id="cb10-31" data-line-number="31"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-32" data-line-number="32"><span class="co">#&gt;    x predicted conf.low conf.high</span></a>
<a class="sourceLine" id="cb10-33" data-line-number="33"><span class="co">#&gt;   52    26.297   22.971    29.623</span></a>
<a class="sourceLine" id="cb10-34" data-line-number="34"><span class="co">#&gt;   62    25.254   22.555    27.953</span></a>
<a class="sourceLine" id="cb10-35" data-line-number="35"><span class="co">#&gt;   65    24.974   22.440    27.508</span></a>
<a class="sourceLine" id="cb10-36" data-line-number="36"><span class="co">#&gt;   66    24.883   22.402    27.364</span></a>
<a class="sourceLine" id="cb10-37" data-line-number="37"><span class="co">#&gt;   91    22.979   21.518    24.440</span></a>
<a class="sourceLine" id="cb10-38" data-line-number="38"><span class="co">#&gt;   93    22.850   21.447    24.253</span></a>
<a class="sourceLine" id="cb10-39" data-line-number="39"><span class="co">#&gt;   95    22.724   21.374    24.073</span></a>
<a class="sourceLine" id="cb10-40" data-line-number="40"><span class="co">#&gt;   97    22.600   21.300    23.900</span></a>
<a class="sourceLine" id="cb10-41" data-line-number="41"><span class="co">#&gt;  105    22.130   20.990    23.271</span></a>
<a class="sourceLine" id="cb10-42" data-line-number="42"><span class="co">#&gt;  109    21.909   20.822    22.995</span></a>
<a class="sourceLine" id="cb10-43" data-line-number="43"><span class="co">#&gt;  ... and 12 more rows.</span></a></code></pre></div>
</div>
<div id="marginal-effects-for-each-level-of-random-effects" class="section level2">
<h2 class="hasAnchor">
<a href="#marginal-effects-for-each-level-of-random-effects" class="anchor"></a>Marginal effects for each level of random effects</h2>
<p>Marginal effects can also be calculated for each group level in mixed models. To this, simply add the name of the related random effects term to the <code>terms</code>-argument, and set <code>type = "re"</code>.</p>
<p>In the following example, we fit a linear mixed model and first simply plot the marginal effetcs, <em>not</em> conditioned on random effects.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">library</span>(sjlabelled)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">library</span>(lme4)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw">data</span>(efc)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">efc<span class="op">$</span>e15relat &lt;-<span class="st"> </span><span class="kw">as_label</span>(efc<span class="op">$</span>e15relat)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">m &lt;-<span class="st"> </span><span class="kw">lmer</span>(neg_c_<span class="dv">7</span> <span class="op">~</span><span class="st"> </span>c12hour <span class="op">+</span><span class="st"> </span>c160age <span class="op">+</span><span class="st"> </span>c161sex <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">|</span><span class="st"> </span>e15relat), <span class="dt">data =</span> efc)</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="st">"c12hour"</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
<p>Changing the type to <code>type = "re"</code> conditions the marginal effects on the random effects, but only on the <em>reference level</em> of the grouping variable. The major difference between <code>type = "fe"</code> and <code>type = "re"</code> is the uncertainty in the variance parameters. This leads to larger confidence intervals for marginal effects with <code>type = "re"</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>), <span class="dt">type =</span> <span class="st">"re"</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
<p>To compute marginal effects for each grouping level, simply add the related random term to the <code>terms</code>-argument. In this case, confidence intervals are not calculated, but marginal effects are conditioned on each group level of the random effects.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>, <span class="st">"e15relat"</span>), <span class="dt">type =</span> <span class="st">"re"</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
<p>Marginal effects, conditioned on random effects, can also be calculated for specific levels only. Simply add the related values into brackets.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">me &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ggpredict.html">ggpredict</a></span>(m, <span class="dt">terms =</span> <span class="kw">c</span>(<span class="st">"c12hour"</span>, <span class="st">"e15relat [child,sibling,cousin]"</span>), <span class="dt">type =</span> <span class="st">"re"</span>)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw"><a href="../reference/plot.html">plot</a></span>(me)</a></code></pre></div>
<p><img src="effectsatvalues_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#marginal-effects-at-specific-values-or-levels">Marginal effects at specific values or levels</a><ul class="nav nav-pills nav-stacked">
<li><a href="#specific-values-and-value-range">Specific values and value range</a></li>
      <li><a href="#choosing-representative-values">Choosing representative values</a></li>
      <li><a href="#transforming-values-with-functions">Transforming values with functions</a></li>
      <li><a href="#pretty-value-ranges">Pretty value ranges</a></li>
      <li><a href="#marginal-effects-conditioned-on-specific-values-of-the-covariates">Marginal effects conditioned on specific values of the covariates</a></li>
      <li><a href="#marginal-effects-for-each-level-of-random-effects">Marginal effects for each level of random effects</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
