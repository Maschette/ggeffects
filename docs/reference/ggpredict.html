<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get marginal effects from model terms — ggaverage • ggeffects</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get marginal effects from model terms — ggaverage" />

<meta property="og:description" content="ggpredict() computes predicted (fitted) values for the
  response, at the margin of specific values from certain model terms,
  where additional model terms indicate the grouping structure.
  ggeffect() computes marginal effects by internally calling
  Effect. ggaverage() computes the average
  predicted values. The result is returned as tidy data frame." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggeffects</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/effectsatvalues.html">Marginal Effects at Specific Values</a>
    </li>
    <li>
      <a href="../articles/marginaleffects.html">Marginal Effects of Regression Models</a>
    </li>
    <li>
      <a href="../articles/plotmethod.html">Plotting Marginal Effects</a>
    </li>
    <li>
      <a href="../articles/stata.html">Different Output between Stata and ggeffects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get marginal effects from model terms</h1>
    
    <div class="hidden name"><code>ggpredict.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>ggpredict()</code> computes predicted (fitted) values for the
  response, at the margin of specific values from certain model terms,
  where additional model terms indicate the grouping structure.
  <code>ggeffect()</code> computes marginal effects by internally calling
  <code><a href='http://www.rdocumentation.org/packages/effects/topics/effect'>Effect</a></code>. <code>ggaverage()</code> computes the average
  predicted values. The result is returned as tidy data frame.</p>
    
    </div>

    <pre class="usage"><span class='fu'>ggaverage</span>(<span class='no'>model</span>, <span class='no'>terms</span>, <span class='kw'>ci.lvl</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"fe"</span>, <span class='st'>"re"</span>, <span class='st'>"fe.zi"</span>,
  <span class='st'>"re.zi"</span>), <span class='kw'>typical</span> <span class='kw'>=</span> <span class='st'>"mean"</span>, <span class='kw'>ppd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>x.as.factor</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>ggeffect</span>(<span class='no'>model</span>, <span class='no'>terms</span>, <span class='kw'>ci.lvl</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>x.as.factor</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>ggpredict</span>(<span class='no'>model</span>, <span class='no'>terms</span>, <span class='kw'>ci.lvl</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"fe"</span>, <span class='st'>"re"</span>, <span class='st'>"fe.zi"</span>,
  <span class='st'>"re.zi"</span>, <span class='st'>"surv"</span>, <span class='st'>"cumhaz"</span>, <span class='st'>"debug"</span>), <span class='kw'>typical</span> <span class='kw'>=</span> <span class='st'>"mean"</span>,
  <span class='kw'>condition</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ppd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>x.as.factor</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>vcov.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>vcov.type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>vcov.args</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A fitted model object, or a list of model objects. Any model
that supports common methods like <code>predict()</code>, <code>family()</code>
or <code>model.frame()</code> should work. For <code>ggeffect()</code>, any model
that is supported by the <a href='https://CRAN.R-project.org/package=effects'><span class="pkg">effects</span></a>-package should work.</p></td>
    </tr>
    <tr>
      <th>terms</th>
      <td><p>Character vector (or a formula) with the names of those terms
from <code>model</code>, for which marginal effects should be displayed. At least
one term is required to calculate effects for certain terms, maximum length is
three terms, where the second and third term indicate the groups, i.e.
predictions of first term are grouped by the levels of the second (and third)
term. If <code>terms</code> is missing or <code>NULL</code>, marginal effects for each
model term are calculated. It is also possible to define specific values for
terms, at which marginal effects should be calculated (see 'Details').
All remaining covariates that are not specified in <code>terms</code> are held
constant (if <code>full.data = FALSE</code>, the default) or are set to the
values from the observations (i.e. are kept as they happen to be;
see 'Details'). See also argument <code>condition</code> and <code>typical</code>.</p></td>
    </tr>
    <tr>
      <th>ci.lvl</th>
      <td><p>Numeric, the level of the confidence intervals. For <code>ggpredict()</code>,
use <code>ci.lvl = NA</code>, if confidence intervals should not be calculated
(for instance, due to computation time).</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Character, only applies for mixed effects models and/or models
with zero-inflation.</p><dl class='dl-horizontal'>
  <dt><code>"fe"</code></dt><dd><p>Predicted values are conditioned on the fixed effects or conditional
  model only. For instance, for models fitted with <code>zeroinfl</code> from
  <span class="pkg">pscl</span>, this would return the predicted mean from the count component
  (without zero-inflation). For models of class <code>glmmTMB</code>, this type
  calls <code>predict(..., type = "link")</code>.</p></dd>
  <dt><code>"re"</code></dt><dd><p>Predicted values are conditioned on the random effects. This only applies
  to mixed models, and <code>type = "re"</code> does not condition on the
  zero-inflation component of the model, nor on different group levels.
  <code>type = "re"</code> uses the reference level in the random effects groups
  (except for <span class="pkg">glmmTMB</span> models, see below), and prediction intervals
  also consider the uncertainty in the variance parameters. For models
  from <span class="pkg">glmmTMB</span>, this type calls <code>predict(..., type = "link")</code>.
  <strong>Note:</strong> For <span class="pkg">glmmTMB</span> models, the random effect variances only
  affect the confidence intervals of predictions, not the predicted values
  themselves (because this is currently not implemented in <span class="pkg">glmmTMB</span>),
  i.e. predicted values are on population-level. To get predicted values
  for each level of the random effects groups, add the name of the related
  random effect term to the <code>terms</code>-argument (for more details,
  see <a href='../doc/effectsatvalues.html'>this vignette</a>).</p></dd>
  <dt><code>"fe.zi"</code></dt><dd><p>Predicted values are conditioned on the fixed effects and the zero-inflation
  component. For instance, for models fitted with <code>zeroinfl</code>
  from <span class="pkg">pscl</span>, this would return the predicted response and for <span class="pkg">glmmTMB</span>,
  this would return the expected value <code>mu*(1-p)</code> <em>without</em>
  conditioning on random effects. For models of class <code>glmmTMB</code>, this type
  calls <code>predict(..., type = "response")</code>.</p></dd>
  <dt><code>"re.zi"</code></dt><dd><p>Predicted values are conditioned on the random effects and the
  zero-inflation component. For models fitted with <span class="pkg">glmmTMB</span>, this
  would return the expected value <code>mu*(1-p)</code>, conditioned on random
  effects. Prediction intervals also consider the uncertainty in the
  variance parameters. For models from <span class="pkg">glmmTMB</span>, this type
  calls <code>simulate()</code>, because conditioning on random effects is
  not yet implemented in <code>predict.glmmTMB()</code>.</p></dd>
  <dt><code>"surv"</code> and <code>"cumhaz"</code></dt><dd><p>Applies only to <code>coxph</code>-objects from the <span class="pkg">survial</span>-package and
  calculates the survival probability or the cumulative hazard of an event.</p></dd>
  <dt><code>"debug"</code></dt><dd><p>Only used internally.</p></dd>
</dl></td>
    </tr>
    <tr>
      <th>typical</th>
      <td><p>Character vector, naming the function to be applied to the
covariates over which the effect is "averaged". The default is "mean".
See <code><a href='http://www.rdocumentation.org/packages/sjstats/topics/typical_value'>typical_value</a></code> for options.</p></td>
    </tr>
    <tr>
      <th>ppd</th>
      <td><p>Logical, if <code>TRUE</code>, predictions for Stan-models are
based on the posterior predictive distribution
(<code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_predict'>posterior_predict</a></code>). If <code>FALSE</code> (the
default), predictions are based on posterior draws of the linear
predictor (<code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_linpred'>posterior_linpred</a></code>).</p></td>
    </tr>
    <tr>
      <th>x.as.factor</th>
      <td><p>Logical, if <code>TRUE</code>, preserves factor-class as
<code>x</code>-column in the returned data frame. By default, the <code>x</code>-column
is always numeric.</p></td>
    </tr>
    <tr>
      <th>condition</th>
      <td><p>Named character vector, which indicates covariates that
should be held constant at specific values. Unlike <code>typical</code>, which
applies a function to the covariates to determine the value that is used
to hold these covariates constant, <code>condition</code> can be used to define
exact values, for instance <code>condition = c(covariate1 = 20, covariate2 = 5)</code>.
See 'Examples'.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>For <code>ggpredict()</code>, further arguments passed down to
<code>predict()</code>, and for <code>ggeffect()</code>, further arguments passed
down to <code><a href='http://www.rdocumentation.org/packages/effects/topics/effect'>Effect</a></code>. If <code>model</code> is of class
<code>glmmTMB</code>, <code>...</code> may also be used to set the number of
simulation for bootstrapped confidence intervals, e.g. <code>nsim = 500</code>.</p></td>
    </tr>
    <tr>
      <th>full.data</th>
      <td><p>Logical, if <code>TRUE</code>, the returned data frame contains
predictions for all observations. This data frame also has columns
for residuals and observed values, and can also be used to plot a
scatter plot of all data points or fitted values.
If <code>FALSE</code> (the default), the returned data frame only contains
predictions for all combinations of unique values of the model's
predictors. Residuals and observed values are set to <code>NA</code>.
Usually, this argument is only used internally by <code>ggaverage()</code>.</p></td>
    </tr>
    <tr>
      <th>vcov.fun</th>
      <td><p>String, indicating the name of the <code>vcov*()</code>-function
from the <span class="pkg">sandwich</span>-package, e.g. <code>vcov.fun = "vcovCL"</code>,
which is used to compute robust standard errors for predictions.
If <code>NULL</code>, standard errors (and confidence intervals) for predictions
are based on the standard errors as returned by the <code>predict()</code>-function.
<strong>Note</strong> that probably not all model objects that work with <code>ggpredict()</code>
are also supported by the <span class="pkg">sandwich</span>-package.</p></td>
    </tr>
    <tr>
      <th>vcov.type</th>
      <td><p>Character vector, specifying the estimation type for the
robust covariance matrix estimation (see <code><a href='http://www.rdocumentation.org/packages/sandwich/topics/vcovHC'>vcovHC</a></code>
for details).</p></td>
    </tr>
    <tr>
      <th>vcov.args</th>
      <td><p>List of named vectors, used as additional arguments that
are passed down to <code>vcov.fun</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame (with <code>ggeffects</code> class attribute) with consistent data columns:</p><dl class='dl-horizontal'>
          <dt><code>x</code></dt><dd><p>the values of the first term in <code>terms</code>, used as x-position in plots.</p></dd>
          <dt><code>predicted</code></dt><dd><p>the predicted values of the response, used as y-position in plots.</p></dd>
          <dt><code>std.error</code></dt><dd><p>the standard error of the predictions.</p></dd>
          <dt><code>conf.low</code></dt><dd><p>the lower bound of the confidence interval for the predicted values.</p></dd>
          <dt><code>conf.high</code></dt><dd><p>the upper bound of the confidence interval for the predicted values.</p></dd>
          <dt><code>observed</code></dt><dd><p>if <code>full.data = TRUE</code>, this columns contains the observed values (the response vector).</p></dd>
          <dt><code>residuals</code></dt><dd><p>if <code>full.data = TRUE</code>, this columns contains residuals.</p></dd>
          <dt><code>group</code></dt><dd><p>the grouping level from the second term in <code>terms</code>, used as grouping-aesthetics in plots.</p></dd>
          <dt><code>facet</code></dt><dd><p>the grouping level from the third term in <code>terms</code>, used to indicate facets in plots.</p></dd>
        </dl><p>For proportional odds logistic regression (see <code><a href='http://www.rdocumentation.org/packages/MASS/topics/polr'>polr</a></code>)
        resp. cumulative link models (e.g., see <code><a href='http://www.rdocumentation.org/packages/ordinal/topics/clm'>clm</a></code>),
        an additional column <code>response.level</code> is returned, which indicates
        the grouping of predictions based on the level of the model's response.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><strong>Supported Models</strong>
  <br /> <br />
  Currently supported model-objects are: <code>lm</code>, <code>glm</code>, <code>glm.nb</code>,
  <code>lme</code>, <code>lmer</code>, <code>glmer</code>, <code>glmer.nb</code>, <code>nlmer</code>,
  <code>glmmTMB</code>, <code>gam</code>, <code>vgam</code>, <code>gamm</code>, <code>gamm4</code>,
  <code>multinom</code>, <code>betareg</code>, <code>gls</code>, <code>gee</code>, <code>plm</code>,
  <code>lrm</code>, <code>polr</code>, <code>clm</code>, <code>clm2</code>, <code>hurdle</code>, <code>zeroinfl</code>,
  <code>svyglm</code>, <code>svyglm.nb</code>, <code>truncreg</code>, <code>coxph</code>,
  <code>stanreg</code>, <code>brmsfit</code>, <code>lmRob</code>, <code>glmRob</code>, <code>brglm</code>
  and <code>rlm</code>.
  Other models not listed here are passed to a generic predict-function
  and might work as well, or maybe with <code>ggeffect()</code>, which
  effectively does the same as <code>ggpredict()</code>. The main difference
  is that <code>ggpredict()</code> calls <code>predict()</code>, while <code>ggeffect()</code>
  calls <code><a href='http://www.rdocumentation.org/packages/effects/topics/effect'>Effect</a></code> to compute marginal effects.
  <br /> <br />
  <strong>Difference between <code>ggpredict()</code> and <code>ggeffect()</code></strong>
  <br /> <br />
  <code>ggpredict()</code> and <code>ggeffect()</code> differ in how factors are
  held constant: <code>ggpredict()</code> uses the reference level, while
  <code>ggeffect()</code> computes a kind of "average" value, which represents
  the proportions of each factor's category.
  <br /> <br />
  <strong>Marginal Effects at Specific Values</strong>
  <br /> <br />
  Specific values of model terms can be specified via the <code>terms</code>-argument.
  Indicating levels in square brackets allows for selecting only
  specific groups or values resp. value ranges. Term name and levels in
  brackets must be separated by a whitespace character, e.g.
  <code>terms = c("age", "education [1,3]")</code>. Numeric ranges, separated
  with colon, are also allowed: <code>terms = c("education", "age [30:60]")</code>.
  <br /> <br />
  The <code>terms</code>-argument also supports the same shortcuts as the
  <code>values</code>-argument in <code><a href='rprs_values.html'>rprs_values()</a></code>. So
  <code>terms = "age [meansd]"</code> would return predictions for the values
  one standard deviation below the mean age, the mean age and
  one SD above the mean age. <code>terms = "age [quart2]"</code> would calculate
  predictions at the value of the lower, median and upper quartile of age.
  <br /> <br />
  Furthermore, it is possible to specify a function name. Values for
  predictions will then be transformed, e.g. <code>terms = "income [exp]"</code>.
  This is useful when model predictors were transformed for fitting the
  model and should be back-transformed to the original scale for predictions.
  <br /> <br />
  You can take a random sample of any size with <code>sample=n</code>, e.g
  <code>terms = "income [sample=8]"</code>, which will sample eight values from
  all possible values of the variable <code>income</code>. This option is especially
  useful for plotting marginal effects at certain levels of random effects
  group levels, where the group factor has many levels that can be completely
  plotted. For more details, see <a href='../doc/effectsatvalues.html'>this vignette</a>.
  <br /> <br />
  Finally, numeric vectors for which no specific values are given, a
  "pretty range" is calculated (see <code><a href='pretty_range.html'>pretty_range</a></code>), to avoid
  memory allocation problems for vectors with many unique values. If a numeric
  vector is specified as second or third term (i.e. if this vector represents
  a grouping structure), representative values (see <code><a href='rprs_values.html'>rprs_values</a></code>)
  are chosen. If all values for a numeric vector should be used to compute
  predictions, you may use e.g. <code>terms = "age [all]"</code>. See also
  package vignettes.
  <br /> <br />
  To create a pretty range that should be smaller or larger than the default
  range (i.e. if no specific values would be given), use the <code>n</code>-tag,
  e.g. <code>terms="age [n=5]"</code> or <code>terms="age [n=12]"</code>. Larger
  values for <code>n</code> return a larger range of predicted values.
  <br /> <br />
  <strong>Holding covariates at constant values</strong>
  <br /> <br />
  For <code>ggpredict()</code>, if <code>full.data = FALSE</code>, <code>expand.grid()</code>
  is called on all unique combinations of <code>model.frame(model)[, terms]</code>
  and used as <code>newdata</code>-argument for <code>predict()</code>. In this case,
  all remaining covariates that are not specified in <code>terms</code> are
  held constant: Numeric values are set to the mean (unless changed with
  the <code>condition</code> or <code>typical</code>-argument), factors are set to their
  reference level (may also be changed with <code>condition</code>) and character
  vectors to their mode (most common element).
  <br /> <br />
  <code>ggaverage()</code> computes the average predicted values, by calling
  <code>ggpredict()</code> with <code>full.data = TRUE</code>, where argument
  <code>newdata = model.frame(model)</code> is used in <code>predict()</code>.
  Hence, predictions are made on the model data. In this case, all
  remaining covariates that are not specified in <code>terms</code> are
  <em>not</em> held constant, but vary between observations (and are
  kept as they happen to be). The predicted values are then averaged
  for each group (if any). Thus, <code>ggpredict()</code> can be considered
  as calculating marginal effects at the mean, while <code>ggaverage()</code>
  computes average marginal effects.
  <br /> <br />
  <code>ggeffect()</code>, by default, sets remaining numeric covariates to
  their mean value, while for factors, a kind of "average" value, which
  represents the proportions of each factor's category, is used.
  <br /> <br />
  <strong>Bayesian Regression Models</strong>
  <br /> <br />
  <code>ggpredict()</code> also works with <strong>Stan</strong>-models from
  the <a href='https://CRAN.R-project.org/package=rstanarm'><span class="pkg">rstanarm</span></a> or <a href='https://CRAN.R-project.org/package=brms'><span class="pkg">brms</span></a>-package. The predicted
  values are the median value of all drawn posterior samples. The
  confidence intervals for Stan-models are actually high density
  intervals, computed by <code><a href='http://www.rdocumentation.org/packages/sjstats/topics/hdi'>hdi</a></code>, unless <code>ppd = TRUE</code>.
  If <code>ppd = TRUE</code>, predictions are based on draws of the posterior
  predictive  distribution and the uncertainty interval is computed
  using  <code><a href='http://www.rdocumentation.org/packages/rstantools/topics/predictive_interval'>predictive_interval</a></code>. By default (i.e.
  <code>ppd = FALSE</code>), the predictions are based on
  <code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_linpred'>posterior_linpred</a></code> and hence have some
  limitations: the uncertainty of the error term is not taken into
  account. The recommendation is to use the posterior predictive
  distribution (<code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_predict'>posterior_predict</a></code>).
  Note that for binomial models, the <code>newdata</code>-argument
  used in <code>posterior_predict()</code> must also contain the vector
  with the number of trials. In this case, a dummy-vector is used,
  where all values for the response are set to 1.
  <br /> <br />
  <strong>Zero-Inflated Mixed Models with glmmTMB</strong>
  <br /> <br />
  If <code>model</code> is of class <code>glmmTMB</code>, bootstrapped confidence
  intervals are calculated for predictions conditioned on the zero-inflated
  part of the model, when the uncertainty in the random-effect paramters
  is ignored (i.e. when <code>type = "fe.zi"</code>, see Brooks et al. 2017, pp.391-392
  for details). <code>type = "fe.zi"</code> returns predicted values at population
  <em>mode</em>, not mean. If predictions are also conditioned on random
  effects (i.e. <code>type = "re.zi"</code>), predicted values are based on
  simulations (see Brooks et al. 2017, pp.392-393 for details).</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Since data for <code>ggaverage()</code> comes from the model frame, not all
  possible combinations of values in <code>terms</code> might be present in the data,
  thus lines or confidence bands from <code><a href='plot.html'>plot()</a></code> might not span over
  the complete x-axis-range.
  <br /> <br />
  <code>polr</code>-, <code>clm</code>-models, or more generally speaking, models with
  ordinal or multinominal outcomes, have an additional column
  <code>response.level</code>, which indicates with which level of the response
  variable the predicted values are associated.
  <br /> <br />
  The <code>print()</code>-method gives a clean output (especially for predictions
  by groups), and indicates at which values covariates were held constant.
  Furthermore, the <code>print()</code>-method has the arguments <code>digits</code> and
  <code>n</code> to control number of decimals and lines to be printed.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Brooks ME, Kristensen K, Benthem KJ van, Magnusson A, Berg CW, Nielsen A, et al. glmmTMB Balances Speed and Flexibility Among Packages for Zero-inflated Generalized Linear Mixed Modeling. The R Journal. 2017;9: 378–400.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>barthtot</span> ~ <span class='no'>c12hour</span> + <span class='no'>neg_c_7</span> + <span class='no'>c161sex</span> + <span class='no'>c172code</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)

<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>)</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.444     1.116   73.257    77.630
#&gt;   20    70.378     0.925   68.564    72.191
#&gt;   45    64.045     0.843   62.393    65.697
#&gt;   65    58.979     0.930   57.157    60.802
#&gt;   85    53.913     1.122   51.713    56.113
#&gt;  105    48.847     1.377   46.148    51.546
#&gt;  125    43.781     1.665   40.517    47.045
#&gt;  170    32.382     2.373   27.732    37.033
#&gt; 
#&gt; Adjusted for:
#&gt; *  neg_c_7 = 11.84
#&gt; *  c161sex =  1.76
#&gt; * c172code =  1.97
#&gt; </div><div class='input'><span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>, <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt;    x predicted std.error conf.low conf.high observed residuals
#&gt;    4    78.205     1.796   74.685    81.724       80     1.795
#&gt;    7    71.990     1.796   68.470    75.510       65    -6.990
#&gt;   10    75.644     2.271   71.193    80.094       75    -0.644
#&gt;   15    71.542     1.089   69.409    73.676       75     3.458
#&gt;   20    71.855     1.684   68.555    75.154       65    -6.855
#&gt;   28    76.720     1.810   73.173    80.267       80     3.280
#&gt;   42    57.093     1.778   53.608    60.578       15   -42.093
#&gt;  168    39.679     2.607   34.570    44.788       45     5.321
#&gt; </div><div class='input'><span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code"</span>))</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt; # low level of education
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    74.746     1.776   71.266    78.227
#&gt;   30    67.147     1.587   64.037    70.257
#&gt;   55    60.815     1.550   57.777    63.853
#&gt;   85    53.216     1.662   49.958    56.473
#&gt;  115    45.617     1.914   41.865    49.368
#&gt;  170    31.685     2.593   26.602    36.768
#&gt; 
#&gt; # intermediate level of education
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.465     1.114   73.282    77.647
#&gt;   30    67.866     0.868   66.165    69.566
#&gt;   55    61.533     0.872   59.824    63.243
#&gt;   85    53.934     1.126   51.727    56.141
#&gt;  115    46.335     1.522   43.352    49.318
#&gt;  170    32.404     2.377   27.745    37.062
#&gt; 
#&gt; # high level of education
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    76.183     1.718   72.816    79.550
#&gt;   30    68.584     1.616   65.417    71.751
#&gt;   55    62.252     1.656   59.006    65.497
#&gt;   85    54.653     1.843   51.040    58.265
#&gt;  115    47.053     2.143   42.853    51.254
#&gt;  170    33.122     2.863   27.511    38.733
#&gt; 
#&gt; Adjusted for:
#&gt; * neg_c_7 = 11.84
#&gt; * c161sex =  1.76
#&gt; </div><div class='input'><span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code"</span>, <span class='st'>"c161sex"</span>))</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt; # low level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    73.954     2.347   69.354    78.554
#&gt;   45    62.556     2.208   58.228    66.883
#&gt;   85    52.424     2.310   47.896    56.951
#&gt;  170    30.893     3.085   24.847    36.939
#&gt; 
#&gt; # low level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    74.996     1.831   71.406    78.585
#&gt;   45    63.597     1.603   60.456    66.738
#&gt;   85    53.465     1.702   50.130    56.800
#&gt;  170    31.934     2.606   26.827    37.042
#&gt; 
#&gt; # intermediate level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    74.673     1.845   71.055    78.290
#&gt;   45    63.274     1.730   59.883    66.665
#&gt;   85    53.142     1.911   49.397    56.887
#&gt;  170    31.611     2.872   25.982    37.241
#&gt; 
#&gt; # intermediate level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.714     1.225   73.313    78.115
#&gt;   45    64.315     0.968   62.418    66.213
#&gt;   85    54.183     1.209   51.815    56.552
#&gt;  170    32.653     2.403   27.943    37.362
#&gt; 
#&gt; # high level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.391     2.220   71.040    79.741
#&gt;   45    63.992     2.176   59.727    68.258
#&gt;   85    53.860     2.364   49.226    58.494
#&gt;  170    32.330     3.257   25.946    38.713
#&gt; 
#&gt; # high level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    76.432     1.809   72.887    79.977
#&gt;   45    65.034     1.712   61.679    68.388
#&gt;   85    54.902     1.910   51.158    58.646
#&gt;  170    33.371     2.895   27.697    39.045
#&gt; 
#&gt; Adjusted for:
#&gt; * neg_c_7 = 11.84
#&gt; </div><div class='input'>
<span class='co'># specified as formula</span>
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> ~ <span class='no'>c12hour</span> + <span class='no'>c172code</span> + <span class='no'>c161sex</span>)</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt; # low level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    73.954     2.347   69.354    78.554
#&gt;   45    62.556     2.208   58.228    66.883
#&gt;   85    52.424     2.310   47.896    56.951
#&gt;  170    30.893     3.085   24.847    36.939
#&gt; 
#&gt; # low level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    74.996     1.831   71.406    78.585
#&gt;   45    63.597     1.603   60.456    66.738
#&gt;   85    53.465     1.702   50.130    56.800
#&gt;  170    31.934     2.606   26.827    37.042
#&gt; 
#&gt; # intermediate level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    74.673     1.845   71.055    78.290
#&gt;   45    63.274     1.730   59.883    66.665
#&gt;   85    53.142     1.911   49.397    56.887
#&gt;  170    31.611     2.872   25.982    37.241
#&gt; 
#&gt; # intermediate level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.714     1.225   73.313    78.115
#&gt;   45    64.315     0.968   62.418    66.213
#&gt;   85    54.183     1.209   51.815    56.552
#&gt;  170    32.653     2.403   27.943    37.362
#&gt; 
#&gt; # high level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.391     2.220   71.040    79.741
#&gt;   45    63.992     2.176   59.727    68.258
#&gt;   85    53.860     2.364   49.226    58.494
#&gt;  170    32.330     3.257   25.946    38.713
#&gt; 
#&gt; # high level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    76.432     1.809   72.887    79.977
#&gt;   45    65.034     1.712   61.679    68.388
#&gt;   85    54.902     1.910   51.158    58.646
#&gt;  170    33.371     2.895   27.697    39.045
#&gt; 
#&gt; Adjusted for:
#&gt; * neg_c_7 = 11.84
#&gt; </div><div class='input'>
<span class='co'># only range of 40 to 60 for variable 'c12hour'</span>
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour [40:60]"</span>)</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt;   x predicted std.error conf.low conf.high
#&gt;  40    65.312     0.842   63.661    66.962
#&gt;  43    64.552     0.842   62.902    66.201
#&gt;  45    64.045     0.843   62.393    65.697
#&gt;  47    63.538     0.846   61.881    65.196
#&gt;  50    62.779     0.852   61.108    64.449
#&gt;  53    62.019     0.862   60.329    63.708
#&gt;  55    61.512     0.870   59.806    63.218
#&gt;  60    60.246     0.896   58.489    62.002
#&gt; 
#&gt; Adjusted for:
#&gt; *  neg_c_7 = 11.84
#&gt; *  c161sex =  1.76
#&gt; * c172code =  1.97
#&gt; </div><div class='input'>
<span class='co'># using "summary()" shows that covariate "neg_c_7" is held</span>
<span class='co'># constant at a value of 11.84 (its mean value). To use a</span>
<span class='co'># different value, use "condition"</span>
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour [40:60]"</span>, <span class='kw'>condition</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='kw'>neg_c_7</span> <span class='kw'>=</span> <span class='fl'>20</span>))</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt;   x predicted std.error conf.low conf.high
#&gt;  40    46.562     2.030   42.582    50.541
#&gt;  43    45.802     2.018   41.847    49.757
#&gt;  45    45.295     2.010   41.355    49.235
#&gt;  47    44.789     2.003   40.862    48.715
#&gt;  50    44.029     1.994   40.121    47.936
#&gt;  53    43.269     1.986   39.377    47.161
#&gt;  55    42.762     1.981   38.879    46.645
#&gt;  60    41.496     1.972   37.631    45.360
#&gt; 
#&gt; Adjusted for:
#&gt; *  c161sex = 1.76
#&gt; * c172code = 1.97
#&gt; </div><div class='input'>
<span class='co'># to plot ggeffects-objects, you can use the 'plot()'-function.</span>
<span class='co'># the following examples show how to build your ggplot by hand.</span>

<span class='co'># plot predicted values, remaining covariates held constant</span>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>)
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span>() +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_ribbon.html'>geom_ribbon</a></span>(<span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>ymin</span> <span class='kw'>=</span> <span class='no'>conf.low</span>, <span class='kw'>ymax</span> <span class='kw'>=</span> <span class='no'>conf.high</span>), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.1</span>)</div><div class='img'><img src='ggpredict-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># with "full.data = TRUE", remaining covariates vary between</span>
<span class='co'># observations, so fitted values can be plotted</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>, <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>)) + <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span>()</div><div class='img'><img src='ggpredict-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># you can add a smoothing-geom to show the linear trend of fitted values</span>
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span>()</div><div class='img'><img src='ggpredict-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># three variables, so we can use facets and groups</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(
  <span class='no'>fit</span>,
  <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c161sex"</span>, <span class='st'>"c172code"</span>),
  <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_smooth.html'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span>(~<span class='no'>facet</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='img'><img src='ggpredict-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># average marginal effects</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggaverage</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code"</span>))
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_smooth.html'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='ggpredict-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># select specific levels for grouping terms</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code [1,3]"</span>, <span class='st'>"c161sex"</span>))
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_smooth.html'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span>(~<span class='no'>facet</span>) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>labs</a></span>(
    <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_y_title</a></span>(<span class='no'>mydf</span>),
    <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_x_title</a></span>(<span class='no'>mydf</span>),
    <span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_legend_title</a></span>(<span class='no'>mydf</span>)
  )</div><div class='img'><img src='ggpredict-6.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># level indication also works for factors with non-numeric levels</span>
<span class='co'># and in combination with numeric levels for other variables</span>
<span class='fu'>library</span>(<span class='no'>sjlabelled</span>)
<span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='no'>efc</span>$<span class='no'>c172code</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/sjlabelled/topics/as_label'>as_label</a></span>(<span class='no'>efc</span>$<span class='no'>c172code</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>barthtot</span> ~ <span class='no'>c12hour</span> + <span class='no'>neg_c_7</span> + <span class='no'>c161sex</span> + <span class='no'>c172code</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>,
  <span class='st'>"c172code [low level of education, high level of education]"</span>,
  <span class='st'>"c161sex [1]"</span>))</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt; # low level of education
#&gt;    x predicted std.error conf.low conf.high    facet
#&gt;    0    72.813     2.501   67.912    77.714 [1] Male
#&gt;   30    65.216     2.386   60.540    69.892 [1] Male
#&gt;   55    58.886     2.375   54.231    63.540 [1] Male
#&gt;   85    51.289     2.464   46.460    56.118 [1] Male
#&gt;  115    43.692     2.654   38.490    48.895 [1] Male
#&gt;  170    29.765     3.200   23.493    36.037 [1] Male
#&gt; 
#&gt; # high level of education
#&gt;    x predicted std.error conf.low conf.high    facet
#&gt;    0    74.030     2.447   69.233    78.826 [1] Male
#&gt;   30    66.433     2.392   61.744    71.122 [1] Male
#&gt;   55    60.102     2.432   55.336    64.869 [1] Male
#&gt;   85    52.506     2.577   47.454    57.557 [1] Male
#&gt;  115    44.909     2.813   39.396    50.421 [1] Male
#&gt;  170    30.982     3.412   24.293    37.670 [1] Male
#&gt; 
#&gt; Adjusted for:
#&gt; * neg_c_7 = 11.84
#&gt; </div><div class='input'>
<span class='co'># use categorical value on x-axis, use axis-labels, add error bars</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c172code"</span>, <span class='st'>"c161sex"</span>))
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>dat</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span>(<span class='kw'>position</span> <span class='kw'>=</span> <span class='fu'><a href='ggplot2.tidyverse.org/reference/position_dodge.html'>position_dodge</a></span>(<span class='fl'>.1</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_errorbar</a></span>(
    <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>ymin</span> <span class='kw'>=</span> <span class='no'>conf.low</span>, <span class='kw'>ymax</span> <span class='kw'>=</span> <span class='no'>conf.high</span>),
    <span class='kw'>position</span> <span class='kw'>=</span> <span class='fu'><a href='ggplot2.tidyverse.org/reference/position_dodge.html'>position_dodge</a></span>(<span class='fl'>.1</span>)
  ) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous</a></span>(<span class='kw'>breaks</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_x_labels</a></span>(<span class='no'>dat</span>))</div><div class='img'><img src='ggpredict-7.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># 3-way-interaction with 2 continuous variables</span>
<span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='co'># make categorical</span>
<span class='no'>efc</span>$<span class='no'>c161sex</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/sjlabelled/topics/as_factor'>as_factor</a></span>(<span class='no'>efc</span>$<span class='no'>c161sex</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>neg_c_7</span> ~ <span class='no'>c12hour</span> * <span class='no'>barthtot</span> * <span class='no'>c161sex</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='co'># select only levels 30, 50 and 70 from continuous variable Barthel-Index</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"barthtot [30,50,70]"</span>, <span class='st'>"c161sex"</span>))
<span class='fu'><a href='ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span>(<span class='no'>dat</span>, <span class='fu'><a href='ggplot2.tidyverse.org/reference/aes.html'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/geom_smooth.html'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>fullrange</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span>(~<span class='no'>facet</span>) +
  <span class='fu'><a href='ggplot2.tidyverse.org/reference/labs.html'>labs</a></span>(
    <span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_legend_title</a></span>(<span class='no'>dat</span>),
    <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_x_title</a></span>(<span class='no'>dat</span>),
    <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_y_title</a></span>(<span class='no'>dat</span>),
    <span class='kw'>title</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_title</a></span>(<span class='no'>dat</span>)
  )</div><div class='img'><img src='ggpredict-8.png' alt='' width='700' height='433' /></div><div class='input'>
# or with ggeffects' plot-method
</div><span class='co'># NOT RUN {</span>
<span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>dat</span>, <span class='kw'>ci</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># use factor levels as x-column in returned data frame</span>
<span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='no'>efc</span>$<span class='no'>c161sex</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/sjlabelled/topics/as_label'>as_label</a></span>(<span class='no'>efc</span>$<span class='no'>c161sex</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>neg_c_7</span> ~ <span class='no'>c12hour</span> + <span class='no'>c161sex</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c161sex"</span>, <span class='kw'>x.as.factor</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; 
#&gt; # Predicted values of Negative impact with 7 items 
#&gt; # x = carer's gender 
#&gt; 
#&gt;       x predicted std.error conf.low conf.high
#&gt;    Male    11.512     0.256   11.009    12.014
#&gt;  Female    11.960     0.143   11.679    12.240
#&gt; 
#&gt; Adjusted for:
#&gt; * c12hour = 42.28
#&gt; </div><div class='input'>
<span class='co'># marginal effects for polynomial terms</span>
<span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>glm</span>(
  <span class='no'>tot_sc_e</span> ~ <span class='no'>c12hour</span> + <span class='no'>e42dep</span> + <span class='no'>e17age</span> + <span class='fu'>I</span>(<span class='no'>e17age</span>^<span class='fl'>2</span>) + <span class='fu'>I</span>(<span class='no'>e17age</span>^<span class='fl'>3</span>),
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>,
  <span class='kw'>family</span> <span class='kw'>=</span> <span class='fu'>poisson</span>()
)
<span class='fu'>ggeffect</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"e17age"</span>)</div><div class='output co'>#&gt; 
#&gt; # Predicted counts of Services for elderly 
#&gt; # x = elder' age 
#&gt; 
#&gt;    x predicted std.error conf.low conf.high
#&gt;   64     1.369     0.140    1.040     1.801
#&gt;   70     0.942     0.059    0.840     1.057
#&gt;   74     0.899     0.059    0.800     1.010
#&gt;   78     0.939     0.050    0.852     1.036
#&gt;   84     1.042     0.052    0.941     1.153
#&gt;   90     1.007     0.066    0.884     1.146
#&gt;   94     0.824     0.121    0.650     1.044
#&gt;  104     0.172     0.697    0.044     0.674
#&gt; </div><div class='output co'>#&gt; <span class='message'>Standard errors are on link-scale (untransformed).</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

