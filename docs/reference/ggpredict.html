<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get marginal effects from model terms — ggaverage • ggeffects</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get marginal effects from model terms — ggaverage" />

<meta property="og:description" content="ggpredict() computes predicted (fitted) values for the
  response, at the margin of specific values from certain model terms,
  where additional model terms indicate the grouping structure.
  ggaverage() computes the average predicted values.
  The result is returned as tidy data frame.
   
  mem() is an alias for ggpredict() (marginal effects
  at the mean), ame() is an alias for ggaverage()
  (average marginal effects)." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggeffects</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/marginaleffects.html">Tidy Data Frames of Marginal Effects</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/strengejacke/ggeffects">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get marginal effects from model terms</h1>
    <small class="dont-index">Source: <a href='https://github.com/strengejacke/ggeffects/blob/master/R/ggaverage.R'><code>R/ggaverage.R</code></a>, <a href='https://github.com/strengejacke/ggeffects/blob/master/R/ggpredict.R'><code>R/ggpredict.R</code></a></small>
    <div class="hidden name"><code>ggpredict.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>ggpredict()</code> computes predicted (fitted) values for the
  response, at the margin of specific values from certain model terms,
  where additional model terms indicate the grouping structure.
  <code>ggaverage()</code> computes the average predicted values.
  The result is returned as tidy data frame.
  <br /> <br />
  <code>mem()</code> is an alias for <code>ggpredict()</code> (marginal effects
  at the mean), <code>ame()</code> is an alias for <code>ggaverage()</code>
  (average marginal effects).</p>
    
    </div>

    <pre class="usage"><span class='fu'>ggaverage</span>(<span class='no'>model</span>, <span class='no'>terms</span>, <span class='kw'>ci.lvl</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"fe"</span>, <span class='st'>"re"</span>),
  <span class='kw'>typical</span> <span class='kw'>=</span> <span class='st'>"mean"</span>, <span class='kw'>ppd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>ame</span>(<span class='no'>model</span>, <span class='no'>terms</span>, <span class='kw'>ci.lvl</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"fe"</span>, <span class='st'>"re"</span>), <span class='kw'>typical</span> <span class='kw'>=</span> <span class='st'>"mean"</span>,
  <span class='kw'>ppd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>ggpredict</span>(<span class='no'>model</span>, <span class='no'>terms</span>, <span class='kw'>ci.lvl</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"fe"</span>, <span class='st'>"re"</span>),
  <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>typical</span> <span class='kw'>=</span> <span class='st'>"mean"</span>, <span class='kw'>ppd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>x.as.factor</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>pretty</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>mem</span>(<span class='no'>model</span>, <span class='no'>terms</span>, <span class='kw'>ci.lvl</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"fe"</span>, <span class='st'>"re"</span>), <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>typical</span> <span class='kw'>=</span> <span class='st'>"mean"</span>, <span class='kw'>ppd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>x.as.factor</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A fitted model object, or a list of model objects. Any model
that supports common methods like <code>predict()</code>, <code>family()</code>
or <code>model.frame()</code> should work.</p></td>
    </tr>
    <tr>
      <th>terms</th>
      <td><p>Character vector with the names of those terms from <code>model</code>,
for which marginal effects should be displayed. At least one term
is required to calculate effects, maximum length is three terms,
where the second and third term indicate the groups, i.e. predictions
of first term are grouped by the levels of the second (and third)
term. Indicating levels in square brackets allows for selecting
only specific groups. Term name and levels in brackets must be
separated by a whitespace character, e.g.
<code>terms = c("age", "education [1,3]")</code>. Numeric ranges, separated
with colon, are also allowed: <code>terms = c("education", "age [30:60]")</code>.
See 'Examples'. All remaining covariates that are not specified in
<code>terms</code> are held constant (if <code>full.data = FALSE</code>, the default)
or are set to the values from the observations (i.e. are kept as they
happen to be; see 'Details').</p></td>
    </tr>
    <tr>
      <th>ci.lvl</th>
      <td><p>Numeric, the level of the confidence intervals. For <code>ggpredict()</code>,
use <code>ci.lvl = NA</code>, if confidence intervals should not be calculated
(for instance, due to computation time).</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Character, only applies for mixed effects models. Indicates
whether predicted values should be conditioned on random effects
(<code>type = "re"</code>) or fixed effects only (<code>type = "fe"</code>,
the default). If <code>type = "re"</code>, the uncertainty in the variance
parameters is currently not taken into account. The specific levels of
the random effects are not provided in the <code>newdata</code>-argument. Hence,
if <code>type = "re"</code>, <code>predict()</code> is called with <code>re.form = NULL</code>,
i.e. predictions are conditioned on random effects only using the first level
of random effects, but the uncertainty in the variance parameters is ignored.</p></td>
    </tr>
    <tr>
      <th>typical</th>
      <td><p>Character vector, naming the function to be applied to the
covariates over which the effect is "averaged". The default is "mean".
See <code><a href='http://www.rdocumentation.org/packages/sjstats/topics/typical_value'>typical_value</a></code> for options.</p></td>
    </tr>
    <tr>
      <th>ppd</th>
      <td><p>Logical, if <code>TRUE</code>, predictions for Stan-models are
based on the posterior predictive distribution
(<code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_predict'>posterior_predict</a></code>). If <code>FALSE</code> (the
default), predictions are based on posterior draws of the linear
predictor (<code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_linpred'>posterior_linpred</a></code>).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed down to <code>predict()</code>.</p></td>
    </tr>
    <tr>
      <th>full.data</th>
      <td><p>Logical, if <code>TRUE</code>, the returned data frame contains
predictions for all observations. This data frame also has columns
for residuals and observed values, and can also be used to plot a
scatter plot of all data points or fitted values.
If <code>FALSE</code> (the default), the returned data frame only contains
predictions for all combinations of unique values of the model's
predictors. Residuals and observed values are set to <code>NA</code>.
Usually, this argument is only used internally by <code>ggaverage()</code>.</p></td>
    </tr>
    <tr>
      <th>x.as.factor</th>
      <td><p>Logical, if <code>TRUE</code>, preserves factor-class as
<code>x</code>-column in the returned data frame. By default, the <code>x</code>-column
is always numeric.</p></td>
    </tr>
    <tr>
      <th>pretty</th>
      <td><p>Logical, if <code>TRUE</code>, terms with many unique values (more
than 25 distinct values) will be "prettyfied" using the <code>pretty()</code>-function.
The number of intervals is the square-root of the value range of the
specific term, which will lead to reduced unique values for which predictions
need to be calculated. This is especially useful in cases where
out-of-memory-errors may occur, or if predictions should be computed for
representative pretty values. <code>pretty = FALSE</code> calculates predictions
for all values of continuous variables in <code>terms</code>, even if these
terms have many unique values. This is useful, for example, for splines.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble (with <code>ggeffects</code> class attribute) with consistent data columns:</p><dl class='dl-horizontal'>
          <dt><code>x</code></dt><dd><p>the values of the first term in <code>terms</code>, used as x-position in plots.</p></dd>
          <dt><code>predicted</code></dt><dd><p>the predicted values of the response, used as y-position in plots.</p></dd>
          <dt><code>conf.low</code></dt><dd><p>the lower bound of the confidence interval for the predicted values.</p></dd>
          <dt><code>conf.high</code></dt><dd><p>the upper bound of the confidence interval for the predicted values.</p></dd>
          <dt><code>observed</code></dt><dd><p>if <code>full.data = TRUE</code>, this columns contains the observed values (the response vector).</p></dd>
          <dt><code>residuals</code></dt><dd><p>if <code>full.data = TRUE</code>, this columns contains residuals.</p></dd>
          <dt><code>group</code></dt><dd><p>the grouping level from the second term in <code>terms</code>, used as grouping-aesthetics in plots.</p></dd>
          <dt><code>facet</code></dt><dd><p>the grouping level from the third term in <code>terms</code>, used to indicate facets in plots.</p></dd>
        </dl><p>For proportional odds logistic regression (see <code><a href='http://www.rdocumentation.org/packages/MASS/topics/polr'>polr</a></code>)
        resp. cumulative link models (e.g., see <code><a href='http://www.rdocumentation.org/packages/ordinal/topics/clm'>clm</a></code>),
        an additional column <code>response.level</code> is returned, which indicates
        the grouping of predictions based on the level of the model's response.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Currently supported model-objects are: <code>lm, glm, glm.nb, lme, lmer,
  glmer, glmer.nb, nlmer, glmmTMB, gam, vgam, gamm, gamm4, multinom,
  betareg, gls, gee, plm, lrm, polr, clm, hurdle, zeroinfl, svyglm,
  svyglm.nb, truncreg, coxph, stanreg, brmsfit</code>.
  Other models not listed here are passed to a generic predict-function
  and might work as well, or maybe with <code><a href='ggeffect.html'>ggeffect()</a></code>, which
  effectively does the same as <code>ggpredict()</code>. The main difference
  between <code>ggpredict()</code> and <code><a href='ggeffect.html'>ggeffect()</a></code> is how factors are
  held constant: <code>ggpredict()</code> uses the reference level, while
  <code><a href='ggeffect.html'>ggeffect()</a></code> computes a kind of "average" value, which represents
  the proportions of each factor's category.
  <br /> <br />
  For <code>ggpredict()</code>, if <code>full.data = FALSE</code>, <code>expand.grid()</code>
  is called on all unique combinations of <code>model.frame(model)[, terms]</code>
  and used as <code>newdata</code>-argument for <code>predict()</code>. In this case,
  all remaining covariates that are not specified in <code>terms</code> are
  held constant. Numeric values are set to the mean (unless changed
  with the <code>typical</code>-argument), factors are set to their
  reference level and character vectors to their mode (most common
  element).
  <br /> <br />
  <code>ggaverage()</code> computes the average predicted values, by calling
  <code>ggpredict()</code> with <code>full.data = TRUE</code>, where argument
  <code>newdata = model.frame(model)</code> is used in <code>predict()</code>.
  Hence, predictions are made on the model data. In this case, all
  remaining covariates that are not specified in <code>terms</code> are
  <em>not</em> held constant, but vary between observations (and are
  kept as they happen to be). The predicted values are then averaged
  for each group (if any).
  <br /> <br />
  Thus, <code>ggpredict()</code> can be considered as calculating marginal
  effects at the mean, while <code>ggaverage()</code> computes average
  marginal effects.
  <br /> <br />
  <code>ggpredict()</code> also works with <strong>Stan</strong>-models from
  the <a href='https://CRAN.R-project.org/package=rstanarm'><span class="pkg">rstanarm</span></a> or <a href='https://CRAN.R-project.org/package=brms'><span class="pkg">brms</span></a>-package. The predicted
  values are the median value of all drawn posterior samples. The
  confidence intervals for Stan-models are actually high density
  intervals, computed by <code><a href='http://www.rdocumentation.org/packages/sjstats/topics/hdi'>hdi</a></code>, unless <code>ppd = TRUE</code>.
  If <code>ppd = TRUE</code>, predictions are based on draws of the posterior
  predictive  distribution and the uncertainty interval is computed
  using  <code><a href='http://www.rdocumentation.org/packages/rstantools/topics/predictive_interval'>predictive_interval</a></code>. By default (i.e.
  <code>ppd = FALSE</code>), the predictions are based on
  <code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_linpred'>posterior_linpred</a></code> and hence have some
  limitations: the uncertainty of the error term is not taken into
  account. The recommendation is to use the posterior predictive
  distribution (<code><a href='http://www.rdocumentation.org/packages/rstantools/topics/posterior_predict'>posterior_predict</a></code>).
  Note that for binomial models, the <code>newdata</code>-argument
  used in <code>posterior_predict()</code> must also contain the vector
  with the number of trials. In this case, a dummy-vector is used,
  where all values for the response are set to 1.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Since data for <code>ggaverage()</code> comes from the model frame, not all
  possible combinations of values in <code>terms</code> might be present in the data,
  thus lines or confidence bands from <code><a href='plot.html'>plot()</a></code> might not span over
  the complete x-axis-range.
  <br /> <br />
  There are some limitations for certain model objects. For example,
  it is currently only possible to compute predicted risk scores for
  <code>coxph</code>-models, but not expected number of events nor survival
  probabilities.
  <br /> <br />
  <code>polr</code>- or <code>clm</code>-models have an additional column
  <code>response.level</code>, which indicates with which level of the response
  variable the predicted values are associated.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>barthtot</span> ~ <span class='no'>c12hour</span> + <span class='no'>neg_c_7</span> + <span class='no'>c161sex</span> + <span class='no'>c172code</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)

<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>)</div><div class='output co'>#&gt; <span class='message'>Following variables had many unique values and were prettified: c12hour. Use `pretty = FALSE` to get smoother plots with all values, however, at the cost of increased memory usage.</span></div><div class='output co'>#&gt; # A tibble: 18 x 5
#&gt;        x predicted conf.low conf.high group
#&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;
#&gt;  1     0      75.4     73.3      77.6 1    
#&gt;  2    10      72.9     70.9      74.9 1    
#&gt;  3    20      70.4     68.6      72.2 1    
#&gt;  4    30      67.8     66.1      69.5 1    
#&gt;  5    40      65.3     63.7      67.0 1    
#&gt;  6    50      62.8     61.1      64.4 1    
#&gt;  7    60      60.2     58.5      62.0 1    
#&gt;  8    70      57.7     55.8      59.6 1    
#&gt;  9    80      55.2     53.1      57.3 1    
#&gt; 10    90      52.6     50.3      55.0 1    
#&gt; 11   100      50.1     47.5      52.7 1    
#&gt; 12   110      47.6     44.7      50.4 1    
#&gt; 13   120      45.0     41.9      48.2 1    
#&gt; 14   130      42.5     39.1      45.9 1    
#&gt; 15   140      40.0     36.3      43.7 1    
#&gt; 16   150      37.4     33.4      41.5 1    
#&gt; 17   160      34.9     30.6      39.2 1    
#&gt; 18   170      32.4     27.7      37.0 1    </div><div class='input'><span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>, <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; # A tibble: 815 x 7
#&gt;        x predicted conf.low conf.high observed residuals group
#&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;
#&gt;  1     4      78.2     74.7      81.7       80      1.80 1    
#&gt;  2     4      84.8     80.9      88.6       75     -9.77 1    
#&gt;  3     4      78.6     74.3      82.9       75     -3.60 1    
#&gt;  4     4      83.2     78.7      87.7      100     16.8  1    
#&gt;  5     4      74.0     69.7      78.3       95     21.0  1    
#&gt;  6     4      74.3     72.0      76.7       15    -59.3  1    
#&gt;  7     4      69.7     67.1      72.3       50    -19.7  1    
#&gt;  8     4      65.1     62.0      68.3       95     29.9  1    
#&gt;  9     4      71.7     67.3      76.1       95     23.3  1    
#&gt; 10     4      74.3     72.0      76.7       80      5.67 1    
#&gt; # ... with 805 more rows</div><div class='input'><span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code"</span>))</div><div class='output co'>#&gt; <span class='message'>Following variables had many unique values and were prettified: c12hour. Use `pretty = FALSE` to get smoother plots with all values, however, at the cost of increased memory usage.</span></div><div class='output co'>#&gt; # A tibble: 54 x 5
#&gt;        x predicted conf.low conf.high group                          
#&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;                          
#&gt;  1     0      74.7     71.3      78.2 low level of education         
#&gt;  2     0      75.5     73.3      77.6 intermediate level of education
#&gt;  3     0      76.2     72.8      79.5 high level of education        
#&gt;  4    10      72.2     68.9      75.5 low level of education         
#&gt;  5    10      72.9     71.0      74.9 intermediate level of education
#&gt;  6    10      73.7     70.4      76.9 high level of education        
#&gt;  7    20      69.7     66.5      72.9 low level of education         
#&gt;  8    20      70.4     68.6      72.2 intermediate level of education
#&gt;  9    20      71.1     67.9      74.3 high level of education        
#&gt; 10    30      67.1     64.0      70.3 low level of education         
#&gt; # ... with 44 more rows</div><div class='input'><span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code"</span>, <span class='st'>"c161sex"</span>))</div><div class='output co'>#&gt; <span class='message'>Following variables had many unique values and were prettified: c12hour. Use `pretty = FALSE` to get smoother plots with all values, however, at the cost of increased memory usage.</span></div><div class='output co'>#&gt; # A tibble: 108 x 6
#&gt;        x predicted conf.low conf.high group                          
#&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;                          
#&gt;  1     0      74.0     69.4      78.6 low level of education         
#&gt;  2     0      75.0     71.4      78.6 low level of education         
#&gt;  3     0      74.7     71.1      78.3 intermediate level of education
#&gt;  4     0      75.7     73.3      78.1 intermediate level of education
#&gt;  5     0      75.4     71.0      79.7 high level of education        
#&gt;  6     0      76.4     72.9      80.0 high level of education        
#&gt;  7    10      71.4     66.9      75.9 low level of education         
#&gt;  8    10      72.5     69.0      75.9 low level of education         
#&gt;  9    10      72.1     68.6      75.7 intermediate level of education
#&gt; 10    10      73.2     71.0      75.4 intermediate level of education
#&gt;    facet     
#&gt;    &lt;fct&gt;     
#&gt;  1 [1] Male  
#&gt;  2 [2] Female
#&gt;  3 [1] Male  
#&gt;  4 [2] Female
#&gt;  5 [1] Male  
#&gt;  6 [2] Female
#&gt;  7 [1] Male  
#&gt;  8 [2] Female
#&gt;  9 [1] Male  
#&gt; 10 [2] Female
#&gt; # ... with 98 more rows</div><div class='input'>
<span class='co'># only range of 40 to 60 for variable 'c12hour'</span>
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour [40:60]"</span>)</div><div class='output co'>#&gt; # A tibble: 21 x 5
#&gt;        x predicted conf.low conf.high group
#&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;
#&gt;  1    40      65.3     63.7      67.0 1    
#&gt;  2    41      65.1     63.4      66.7 1    
#&gt;  3    42      64.8     63.2      66.5 1    
#&gt;  4    43      64.6     62.9      66.2 1    
#&gt;  5    44      64.3     62.6      65.9 1    
#&gt;  6    45      64.0     62.4      65.7 1    
#&gt;  7    46      63.8     62.1      65.4 1    
#&gt;  8    47      63.5     61.9      65.2 1    
#&gt;  9    48      63.3     61.6      64.9 1    
#&gt; 10    49      63.0     61.4      64.7 1    
#&gt; # ... with 11 more rows</div><div class='input'>
<span class='co'># to plot ggeffects-objects, you can use the 'plot()'-function.</span>
<span class='co'># the following examples show how to build your ggplot by hand.</span>

<span class='co'># plot predicted values, remaining covariates held constant</span>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>)</div><div class='output co'>#&gt; <span class='message'>Following variables had many unique values and were prettified: c12hour. Use `pretty = FALSE` to get smoother plots with all values, however, at the cost of increased memory usage.</span></div><div class='input'><span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_ribbon'>geom_ribbon</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>ymin</span> <span class='kw'>=</span> <span class='no'>conf.low</span>, <span class='kw'>ymax</span> <span class='kw'>=</span> <span class='no'>conf.high</span>), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>.1</span>)</div><div class='img'><img src='ggpredict-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># with "full.data = TRUE", remaining covariates vary between</span>
<span class='co'># observations, so fitted values can be plotted</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c12hour"</span>, <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>)) + <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></span>()</div><div class='img'><img src='ggpredict-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># you can add a smoothing-geom to show the linear trend of fitted values</span>
<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_smooth'>geom_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></span>()</div><div class='img'><img src='ggpredict-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># three variables, so we can use facets and groups</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(
  <span class='no'>fit</span>,
  <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c161sex"</span>, <span class='st'>"c172code"</span>),
  <span class='kw'>full.data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)
<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_smooth'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></span>(~<span class='no'>facet</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='img'><img src='ggpredict-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># average marginal effects</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggaverage</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code"</span>))
<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_smooth'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='ggpredict-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># select specific levels for grouping terms</span>
<span class='no'>mydf</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"c172code [1,3]"</span>, <span class='st'>"c161sex"</span>))</div><div class='output co'>#&gt; <span class='message'>Following variables had many unique values and were prettified: c12hour. Use `pretty = FALSE` to get smoother plots with all values, however, at the cost of increased memory usage.</span></div><div class='input'><span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>mydf</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_smooth'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></span>(~<span class='no'>facet</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/labs'>labs</a></span>(
    <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_y_title</a></span>(<span class='no'>mydf</span>),
    <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_x_title</a></span>(<span class='no'>mydf</span>),
    <span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_legend_title</a></span>(<span class='no'>mydf</span>)
  )</div><div class='img'><img src='ggpredict-6.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># level indication also works for factors with non-numeric levels</span>
<span class='co'># and in combination with numeric levels for other variables</span>
<span class='fu'>library</span>(<span class='no'>sjlabelled</span>)
<span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='no'>efc</span>$<span class='no'>c172code</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/sjlabelled/topics/as_label'>as_label</a></span>(<span class='no'>efc</span>$<span class='no'>c172code</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>barthtot</span> ~ <span class='no'>c12hour</span> + <span class='no'>neg_c_7</span> + <span class='no'>c161sex</span> + <span class='no'>c172code</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>,
  <span class='st'>"c172code [low level of education, high level of education]"</span>,
  <span class='st'>"c161sex [1]"</span>))</div><div class='output co'>#&gt; <span class='message'>Following variables had many unique values and were prettified: c12hour. Use `pretty = FALSE` to get smoother plots with all values, however, at the cost of increased memory usage.</span></div><div class='output co'>#&gt; # A tibble: 36 x 6
#&gt;        x predicted conf.low conf.high group                   facet   
#&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;                   &lt;fct&gt;   
#&gt;  1     0      72.8     67.9      77.7 low level of education  [1] Male
#&gt;  2     0      74.0     69.2      78.8 high level of education [1] Male
#&gt;  3    10      70.3     65.5      75.1 low level of education  [1] Male
#&gt;  4    10      71.5     66.8      76.2 high level of education [1] Male
#&gt;  5    20      67.7     63.0      72.5 low level of education  [1] Male
#&gt;  6    20      69.0     64.3      73.7 high level of education [1] Male
#&gt;  7    30      65.2     60.5      69.9 low level of education  [1] Male
#&gt;  8    30      66.4     61.7      71.1 high level of education [1] Male
#&gt;  9    40      62.7     58.0      67.3 low level of education  [1] Male
#&gt; 10    40      63.9     59.2      68.6 high level of education [1] Male
#&gt; # ... with 26 more rows</div><div class='input'>
<span class='co'># use categorical value on x-axis, use axis-labels, add error bars</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c172code"</span>, <span class='st'>"c161sex"</span>))
<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>dat</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='no'>x</span>, <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></span>(<span class='kw'>position</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/position_dodge'>position_dodge</a></span>(<span class='fl'>.1</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_linerange'>geom_errorbar</a></span>(
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>ymin</span> <span class='kw'>=</span> <span class='no'>conf.low</span>, <span class='kw'>ymax</span> <span class='kw'>=</span> <span class='no'>conf.high</span>),
    <span class='kw'>position</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/position_dodge'>position_dodge</a></span>(<span class='fl'>.1</span>)
  ) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/scale_continuous'>scale_x_continuous</a></span>(<span class='kw'>breaks</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_x_labels</a></span>(<span class='no'>dat</span>))</div><div class='img'><img src='ggpredict-7.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># 3-way-interaction with 2 continuous variables</span>
<span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='co'># make categorical</span>
<span class='no'>efc</span>$<span class='no'>c161sex</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/sjlabelled/topics/as_factor'>as_factor</a></span>(<span class='no'>efc</span>$<span class='no'>c161sex</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>neg_c_7</span> ~ <span class='no'>c12hour</span> * <span class='no'>barthtot</span> * <span class='no'>c161sex</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='co'># select only levels 30, 50 and 70 from continuous variable Barthel-Index</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"c12hour"</span>, <span class='st'>"barthtot [30,50,70]"</span>, <span class='st'>"c161sex"</span>))</div><div class='output co'>#&gt; <span class='message'>Following variables had many unique values and were prettified: c12hour. Use `pretty = FALSE` to get smoother plots with all values, however, at the cost of increased memory usage.</span></div><div class='input'><span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>dat</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>predicted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>group</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_smooth'>stat_smooth</a></span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>fullrange</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></span>(~<span class='no'>facet</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/labs'>labs</a></span>(
    <span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_legend_title</a></span>(<span class='no'>dat</span>),
    <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_x_title</a></span>(<span class='no'>dat</span>),
    <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_y_title</a></span>(<span class='no'>dat</span>),
    <span class='kw'>title</span> <span class='kw'>=</span> <span class='fu'><a href='get_title.html'>get_title</a></span>(<span class='no'>dat</span>)
  )</div><div class='img'><img src='ggpredict-8.png' alt='' width='700' height='433' /></div><div class='input'>
# or with ggeffects' plot-method
</div><span class='co'># NOT RUN {</span>
<span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>dat</span>, <span class='kw'>ci</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># use factor levels as x-column in returned data frame</span>
<span class='fu'>data</span>(<span class='no'>efc</span>)
<span class='no'>efc</span>$<span class='no'>c161sex</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/sjlabelled/topics/as_label'>as_label</a></span>(<span class='no'>efc</span>$<span class='no'>c161sex</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>neg_c_7</span> ~ <span class='no'>c12hour</span> + <span class='no'>c161sex</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='fu'>ggpredict</span>(<span class='no'>fit</span>, <span class='kw'>terms</span> <span class='kw'>=</span> <span class='st'>"c161sex"</span>, <span class='kw'>x.as.factor</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; # A tibble: 2 x 5
#&gt;   x      predicted conf.low conf.high group
#&gt;   &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;
#&gt; 1 Male        11.5     11.0      12.0 1    
#&gt; 2 Female      12.0     11.7      12.2 1    </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

