<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Tidy Data Frames of Marginal Effects for 'ggplot' from Model Outputs • ggeffects</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Create Tidy Data Frames of Marginal Effects for 'ggplot' from Model Outputs">
<meta property="og:description" content="Compute marginal effects from statistical models and returns the 
    result as tidy data frames. These data frames are ready to use with the 
    'ggplot2'-package. Marginal effects can be calculated for many different 
    models. Interaction terms, splines and polynomial terms are also supported. 
    The main functions are ggpredict(), ggemmeans() and ggeffect(). There is a 
    generic plot()-method to plot the results using 'ggplot2'.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ggeffects</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.11.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/ggeffects.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction_effectsatvalues.html">Introduction: Marginal Effects at Specific Values</a>
    </li>
    <li>
      <a href="articles/introduction_plotcustomize.html">Introduction: Customize Plot Appearance</a>
    </li>
    <li>
      <a href="articles/introduction_plotmethod.html">Introducion: Plotting Marginal Effects</a>
    </li>
    <li>
      <a href="articles/introduction_randomeffects.html">Introduction: Marginal Effects for Random Effects Models</a>
    </li>
    <li>
      <a href="articles/practical_logisticmixedmodel.html">Practical example: Logistic Mixed Effects Model with Interaction Term</a>
    </li>
    <li>
      <a href="articles/technical_differencepredictemmeans.html">Technical Details: Difference between ggpredict() and ggemmeans()</a>
    </li>
    <li>
      <a href="articles/technical_stata.html">Technical Details: Different Output between Stata and ggeffects</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="ggeffects---create-tidy-data-frames-of-marginal-effects-for-ggplot-from-model-outputs-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ggeffects---create-tidy-data-frames-of-marginal-effects-for-ggplot-from-model-outputs-" class="anchor"></a>ggeffects - Create Tidy Data Frames of Marginal Effects for ‘ggplot’ from Model Outputs <img src="reference/figures/logo.png" align="right">
</h1></div>

<div id="why-marginal-effects" class="section level2">
<h2 class="hasAnchor">
<a href="#why-marginal-effects" class="anchor"></a>Why marginal effects?</h2>
<p>Results of regression models are typically presented as tables that are easy to understand. For more complex models that include interaction or quadratic / spline terms, tables with numbers are less helpful and difficult to interpret. In such cases, <em>marginal effects</em> are far easier to understand. In particular, the visualization of marginal effects allows to intuitively get the idea of how predictors and outcome are associated, even for complex models.</p>
</div>
<div id="aim-of-this-package" class="section level2">
<h2 class="hasAnchor">
<a href="#aim-of-this-package" class="anchor"></a>Aim of this package</h2>
<p><strong>ggeffects</strong> computes marginal effects at the mean or at representative values (<a href="https://stats.stackexchange.com/tags/marginal-effect/info">see definitions here</a>) from statistical models and returns the result as tidy data frames. These data frames are ready to use with the <strong>ggplot2</strong>-package.</p>
</div>
<div id="documentation-and-support" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation-and-support" class="anchor"></a>Documentation and Support</h2>
<p>Please visit <a href="https://strengejacke.github.io/ggeffects/">https://strengejacke.github.io/ggeffects/</a> for documentation and vignettes. In case you want to file an issue or contribute in another way to the package, please follow <a href="https://github.com/strengejacke/ggeffects/blob/master/CONTRIBUTING.md">this guide</a>. For questions about the functionality, you may either contact me via email or also file an issue.</p>
</div>
<div id="ggeffects-supports-many-different-models-and-is-easy-to-use" class="section level2">
<h2 class="hasAnchor">
<a href="#ggeffects-supports-many-different-models-and-is-easy-to-use" class="anchor"></a>ggeffects supports many different models and is easy to use</h2>
<p>Marginal effects can be calculated for many different models. Currently supported model-objects are: <code>betabin</code>, <code>betareg</code>, <code>bglmer</code>, <code>blmer</code>, <code>brglm</code>, <code>brmsfit</code>, <code>clm</code>, <code>clm2</code>, <code>clmm</code>, <code>coxph</code>, <code>gam</code> (package <strong>mgcv</strong>), <code>Gam</code> (package <strong>gam</strong>), <code>gamlss</code>, <code>gamm</code>, <code>gamm4</code>, <code>gee</code>, <code>geeglm</code>, <code>glm</code>, <code>glm.nb</code>, <code>glmer</code>, <code>glmer.nb</code>, <code>glmmTMB</code>, <code>glmmPQL</code>, <code>glmrob</code>, <code>glmRob</code>, <code>gls</code>, <code>hurdle</code>, <code>ivreg</code>, <code>lm</code>, <code>lm_robust</code>, <code>lme</code>, <code>lmer</code>, <code>lmrob</code>, <code>lmRob</code>, <code>logistf</code>, <code>lrm</code>, <code>MixMod</code>, <code>MCMCglmm</code>, <code>multinom</code>, <code>negbin</code>, <code>nlmer</code>, <code>ols</code>, <code>plm</code>, <code>polr</code>, <code>rlm</code>, <code>rlmer</code>, <code>rq</code>, <code>rqss</code>, <code>stanreg</code>, <code>survreg</code>, <code>svyglm</code>, <code>svyglm.nb</code>, <code>tobit</code>, <code>truncreg</code>, <code>vgam</code>, <code>wbm</code>, <code>zeroinfl</code> and <code>zerotrunc</code>. Other models not listed here are passed to a generic predict-function and might work as well, or maybe with <code><a href="reference/ggpredict.html">ggeffect()</a></code> or <code><a href="reference/ggpredict.html">ggemmeans()</a></code>, which effectively do the same as <code><a href="reference/ggpredict.html">ggpredict()</a></code>.</p>
<p>Interaction terms, splines and polynomial terms are also supported. The main functions are <code><a href="reference/ggpredict.html">ggpredict()</a></code>, <code><a href="reference/ggpredict.html">ggemmeans()</a></code> and <code><a href="reference/ggpredict.html">ggeffect()</a></code>. There is a generic <code><a href="reference/plot.html">plot()</a></code>-method to plot the results using <strong>ggplot2</strong>.</p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>The returned data frames always have the same, consistent structure and column names, so it’s easy to create ggplot-plots without the need to re-write the function call. <code>x</code> and <code>predicted</code> are the values for the x- and y-axis. <code>conf.low</code> and <code>conf.high</code> could be used as <code>ymin</code> and <code>ymax</code> aesthetics for ribbons to add confidence bands to the plot. <code>group</code> can be used as grouping-aesthetics, or for faceting.</p>
<p><code><a href="reference/ggpredict.html">ggpredict()</a></code> requires at least one, but not more than four terms specified in the <code>terms</code>-argument. Predicted values of the response, along the values of the first term are calculated, optionally grouped by the other terms specified in <code>terms</code>.</p>
<pre><code>data(efc)
fit &lt;- lm(barthtot ~ c12hour + neg_c_7 + c161sex + c172code, data = efc)

ggpredict(fit, terms = "c12hour")
#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.444     1.116   73.257    77.630
#&gt;   15    71.644     0.965   69.753    73.535
#&gt;   35    66.578     0.851   64.911    68.245
#&gt;   50    62.779     0.852   61.108    64.449
#&gt;   70    57.713     0.970   55.811    59.614
#&gt;   85    53.913     1.122   51.713    56.113
#&gt;  100    50.113     1.309   47.547    52.680
#&gt;  120    45.047     1.591   41.929    48.166
#&gt;  135    41.248     1.817   37.686    44.810
#&gt;  170    32.382     2.373   27.732    37.033
#&gt; 
#&gt; Adjusted for:
#&gt; *  neg_c_7 = 11.84
#&gt; *  c161sex =  1.76
#&gt; * c172code =  1.97</code></pre>
<p>A possible call to ggplot could look like this:</p>
<pre><code>library(ggplot2)
mydf &lt;- ggpredict(fit, terms = "c12hour")
ggplot(mydf, aes(x, predicted)) +
  geom_line() +
  geom_ribbon(aes(ymin = conf.low, ymax = conf.high), alpha = .1)</code></pre>
<p><img src="reference/figures/README-example-1.png"></p>
<p>However, there is also a <code><a href="reference/plot.html">plot()</a></code>-method. This method uses convenient defaults, to easily create the most suitable plot for the marginal effects.</p>
<pre><code>mydf &lt;- ggpredict(fit, terms = "c12hour")
plot(mydf)</code></pre>
<p><img src="reference/figures/README-example-2.png"></p>
<p><strong>ggeffects</strong> has a <code><a href="reference/plot.html">plot()</a></code>-method with some convenient defaults, which allows quickly creating ggplot-objects.</p>
<p>With three variables, predictions can be grouped and faceted.</p>
<pre><code>ggpredict(fit, terms = c("c12hour", "c172code", "c161sex"))
#&gt; 
#&gt; # Predicted values of Total score BARTHEL INDEX 
#&gt; # x = average number of hours of care per week 
#&gt; 
#&gt; # low level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    73.954     2.347   69.354    78.554
#&gt;   45    62.556     2.208   58.228    66.883
#&gt;   85    52.424     2.310   47.896    56.951
#&gt;  170    30.893     3.085   24.847    36.939
#&gt; 
#&gt; # low level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    74.996     1.831   71.406    78.585
#&gt;   45    63.597     1.603   60.456    66.738
#&gt;   85    53.465     1.702   50.130    56.800
#&gt;  170    31.934     2.606   26.827    37.042
#&gt; 
#&gt; # intermediate level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    74.673     1.845   71.055    78.290
#&gt;   45    63.274     1.730   59.883    66.665
#&gt;   85    53.142     1.911   49.397    56.887
#&gt;  170    31.611     2.872   25.982    37.241
#&gt; 
#&gt; # intermediate level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.714     1.225   73.313    78.115
#&gt;   45    64.315     0.968   62.418    66.213
#&gt;   85    54.183     1.209   51.815    56.552
#&gt;  170    32.653     2.403   27.943    37.362
#&gt; 
#&gt; # high level of education
#&gt; # [1] Male
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    75.391     2.220   71.040    79.741
#&gt;   45    63.992     2.176   59.727    68.258
#&gt;   85    53.860     2.364   49.226    58.494
#&gt;  170    32.330     3.257   25.946    38.713
#&gt; 
#&gt; # high level of education
#&gt; # [2] Female
#&gt;    x predicted std.error conf.low conf.high
#&gt;    0    76.432     1.809   72.887    79.977
#&gt;   45    65.034     1.712   61.679    68.388
#&gt;   85    54.902     1.910   51.158    58.646
#&gt;  170    33.371     2.895   27.697    39.045
#&gt; 
#&gt; Adjusted for:
#&gt; * neg_c_7 = 11.84

mydf &lt;- ggpredict(fit, terms = c("c12hour", "c172code", "c161sex"))
ggplot(mydf, aes(x = x, y = predicted, colour = group)) +
  stat_smooth(method = "lm", se = FALSE) +
  facet_wrap(~facet)</code></pre>
<p><img src="reference/figures/README-example-3.png"></p>
<p><code><a href="reference/plot.html">plot()</a></code> works for this case, as well:</p>
<pre><code><a href="reference/plot.html">plot(mydf)</a></code></pre>
<p><img src="reference/figures/README-example-4.png"></p>
<p>There are some more features, which are explained in more detail in the package-vignette.</p>
</div>
<div id="contributing-to-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing-to-the-package" class="anchor"></a>Contributing to the package</h2>
<p>Please follow <a href="CONTRIBUTING.html">this guide</a> if you like to contribute to this package.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div id="latest-development-build" class="section level3">
<h3 class="hasAnchor">
<a href="#latest-development-build" class="anchor"></a>Latest development build</h3>
<p>To install the latest development snapshot (see latest changes below), type following commands into the R console:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(devtools)</a>
<a class="sourceLine" id="cb6-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"strengejacke/ggeffects"</span>)</a></code></pre></div>
<p>Please note the package dependencies when installing from GitHub. The GitHub version of this package may depend on latest GitHub versions of my other packages, so you may need to install those first, if you encounter any problems. Here’s the order for installing packages from GitHub:</p>
<p><a href="https://github.com/strengejacke/sjlabelled">sjlabelled</a> → <a href="https://github.com/strengejacke/sjmisc">sjmisc</a> → <a href="https://github.com/strengejacke/sjstats">sjstats</a> → <a href="https://github.com/strengejacke/ggeffects">ggeffects</a> → <a href="https://github.com/strengejacke/sjPlot">sjPlot</a></p>
</div>
<div id="officiale-stable-release" class="section level3">
<h3 class="hasAnchor">
<a href="#officiale-stable-release" class="anchor"></a>Officiale, stable release</h3>
<p>To install the latest stable release from CRAN, type following command into the R console:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"ggeffects"</span>)</a></code></pre></div>
</div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>In case you want / have to cite my package, please use <code><a href="https://www.rdocumentation.org/packages/utils/topics/citation">citation('ggeffects')</a></code> for citation information.</p>
<p><a href="https://doi.org/10.21105/joss.00772"><img src="http://joss.theoj.org/papers/10.21105/joss.00772/status.svg" alt="DOI"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=ggeffects">https://​cloud.r-project.org/​package=ggeffects</a>
</li>
<li>Report a bug at <br><a href="https://github.com/strengejacke/ggeffects/issues">https://​github.com/​strengejacke/​ggeffects/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing ggeffects</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/strengejacke">Daniel Lüdecke</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8895-3206" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=ggeffects"><img src="http://www.r-pkg.org/badges/version/ggeffects" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://doi.org/10.21105/joss.00772"><img src="http://joss.theoj.org/papers/10.21105/joss.00772/status.svg" alt="DOI"></a></li>
<li><a href="https://strengejacke.github.io/ggeffects/"><img src="https://img.shields.io/badge/documentation-ggeffects-orange.svg?colorB=E91E63" alt="Documentation"></a></li>
<li><a href="http://cranlogs.r-pkg.org/"><img src="http://cranlogs.r-pkg.org/badges/ggeffects" alt="downloads"></a></li>
<li><a href="http://cranlogs.r-pkg.org/"><img src="http://cranlogs.r-pkg.org/badges/grand-total/ggeffects" alt="total"></a></li>
</ul>
</div>
</div>
</div>

      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/strengejacke">Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
